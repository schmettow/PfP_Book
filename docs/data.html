<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="7 Working with data | Programming Interaction for Psychologists" />
<meta property="og:type" content="book" />



<meta name="github-repo" content="schmettow/PfP_Book" />

<meta name="author" content="Martin Schmettow and Lena Brandl" />

<meta name="date" content="2021-11-01" />


<meta name="description" content="7 Working with data | Programming Interaction for Psychologists">

<title>7 Working with data | Programming Interaction for Psychologists</title>

<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.6.1/DiagrammeR.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#preface">Preface</a></li>
<li><a href="intro.html#intro"><span class="toc-section-number">1</span> Introduction</a>
<ul>
<li><a href="intro.html#installing-a-python-environment"><span class="toc-section-number">1.1</span> Installing a Python environment</a></li>
<li><a href="intro.html#installing-the-anaconda-python-environment"><span class="toc-section-number">1.2</span> Installing the Anaconda Python environment</a></li>
<li><a href="intro.html#windows"><span class="toc-section-number">1.3</span> Windows</a></li>
<li><a href="intro.html#macos"><span class="toc-section-number">1.4</span> MacOS</a></li>
<li><a href="intro.html#testing-your-environment"><span class="toc-section-number">1.5</span> Testing your environment</a></li>
<li><a href="intro.html#dumb_computers"><span class="toc-section-number">1.6</span> Computers are dumb</a></li>
<li><a href="intro.html#dive-in-a-first-example"><span class="toc-section-number">1.7</span> Dive in: a first example</a></li>
<li><a href="intro.html#batchwork"><span class="toc-section-number">1.8</span> Making an eye tracker</a>
<ul>
<li><a href="intro.html#yets-and-yetis"><span class="toc-section-number">1.8.1</span> YETs and Yetis</a></li>
<li><a href="intro.html#the-eyeballing-exercise"><span class="toc-section-number">1.8.2</span> The Eyeballing exercise</a></li>
<li><a href="intro.html#dumb-pictures"><span class="toc-section-number">1.8.3</span> Dumb pictures</a></li>
<li><a href="intro.html#from-pixel-to-eye-tracking"><span class="toc-section-number">1.8.4</span> From pixel to eye tracking</a></li>
<li><a href="intro.html#into-the-batch"><span class="toc-section-number">1.8.5</span> Into the batch</a></li>
</ul></li>
</ul></li>
<li><a href="variables.html#variables"><span class="toc-section-number">2</span> Variables, values and types</a>
<ul>
<li><a href="variables.html#variables-1"><span class="toc-section-number">2.1</span> Variables</a></li>
<li><a href="variables.html#stroop-task-variables"><span class="toc-section-number">2.2</span> Use of variables in the Stroop Task</a></li>
<li><a href="variables.html#how-variables-are-used"><span class="toc-section-number">2.3</span> How Variables Are Used</a></li>
<li><a href="variables.html#data-types"><span class="toc-section-number">2.4</span> Data types</a>
<ul>
<li><a href="variables.html#numbers"><span class="toc-section-number">2.4.1</span> Numbers</a></li>
<li><a href="variables.html#strings"><span class="toc-section-number">2.4.2</span> Strings</a></li>
<li><a href="variables.html#booleans"><span class="toc-section-number">2.4.3</span> Booleans</a></li>
</ul></li>
<li><a href="variables.html#object-variables-in-a-yeti"><span class="toc-section-number">2.5</span> Object variables in a Yeti</a></li>
<li><a href="variables.html#common-errors"><span class="toc-section-number">2.6</span> Common errors</a></li>
<li><a href="variables.html#debugging"><span class="toc-section-number">2.7</span> Debugging</a></li>
<li><a href="variables.html#exercises-1"><span class="toc-section-number">2.8</span> Exercises</a>
<ul>
<li><a href="variables.html#exercise-1.-operators"><span class="toc-section-number">2.8.1</span> Exercise 1. Operators</a></li>
<li><a href="variables.html#exercise-2.-values"><span class="toc-section-number">2.8.2</span> Exercise 2. Values</a></li>
<li><a href="variables.html#exercise-3.-mini-programs"><span class="toc-section-number">2.8.3</span> Exercise 3. Mini programs</a></li>
<li><a href="variables.html#exercise-4.-debugging"><span class="toc-section-number">2.8.4</span> Exercise 4. Debugging</a></li>
<li><a href="variables.html#exercise-5.-string-concatenation"><span class="toc-section-number">2.8.5</span> Exercise 5. String concatenation</a></li>
<li><a href="variables.html#exercise-6.-variable-names"><span class="toc-section-number">2.8.6</span> Exercise 6. Variable names</a></li>
<li><a href="variables.html#exercise-7.-stroop-task-welcome-message"><span class="toc-section-number">2.8.7</span> Exercise 7. Stroop task welcome message</a></li>
<li><a href="variables.html#exercise-8.-printing"><span class="toc-section-number">2.8.8</span> Exercise 8. Printing</a></li>
<li><a href="variables.html#exercise-9.-using-python-as-a-calculator"><span class="toc-section-number">2.8.9</span> Exercise 9. Using Python as a calculator</a></li>
<li><a href="variables.html#exercise-10.-a-boolean-puzzle"><span class="toc-section-number">2.8.10</span> Exercise 10. A Boolean puzzle</a></li>
</ul></li>
<li><a href="variables.html#think-further-1"><span class="toc-section-number">2.9</span> Think Further</a></li>
</ul></li>
<li><a href="conditionals.html#conditionals"><span class="toc-section-number">3</span> Conditionals</a>
<ul>
<li><a href="conditionals.html#boolean-logic"><span class="toc-section-number">3.1</span> Boolean logic</a></li>
<li><a href="conditionals.html#if-then"><span class="toc-section-number">3.2</span> if this is true, then do this</a></li>
<li><a href="conditionals.html#else-do-that"><span class="toc-section-number">3.3</span> else do that</a></li>
<li><a href="conditionals.html#bringing-interaction-to-life-conditional-state-transitions"><span class="toc-section-number">3.4</span> Bringing interaction to life: Conditional state transitions</a>
<ul>
<li><a href="conditionals.html#transition-tables"><span class="toc-section-number">3.4.1</span> Transition tables</a></li>
<li><a href="conditionals.html#state-charts"><span class="toc-section-number">3.4.2</span> State charts</a></li>
</ul></li>
<li><a href="conditionals.html#common-errors-1"><span class="toc-section-number">3.5</span> Common errors</a></li>
<li><a href="conditionals.html#debugging-1"><span class="toc-section-number">3.6</span> Debugging</a></li>
<li><a href="conditionals.html#exercises-2"><span class="toc-section-number">3.7</span> Exercises</a>
<ul>
<li><a href="conditionals.html#exercise-1.-boolean-logic"><span class="toc-section-number">3.7.1</span> Exercise 1. Boolean logic</a></li>
<li><a href="conditionals.html#exercise-2.-state-charts"><span class="toc-section-number">3.7.2</span> Exercise 2. State charts</a></li>
<li><a href="conditionals.html#exercise-3.-transition-tables"><span class="toc-section-number">3.7.3</span> Exercise 3. Transition tables</a></li>
<li><a href="conditionals.html#exercise-4.-mini-programs"><span class="toc-section-number">3.7.4</span> Exercise 4. Mini programs</a></li>
<li><a href="conditionals.html#exercise-5.-following-the-control-flow"><span class="toc-section-number">3.7.5</span> Exercise 5. Following the control flow</a></li>
<li><a href="conditionals.html#exercise-6.-indentation"><span class="toc-section-number">3.7.6</span> Exercise 6. Indentation</a></li>
<li><a href="conditionals.html#exercise-7.-pseudo-code-conditionals"><span class="toc-section-number">3.7.7</span> Exercise 7. Pseudo code conditionals</a></li>
<li><a href="conditionals.html#exercise-8.-modify-stroop-task"><span class="toc-section-number">3.7.8</span> Exercise 8. Modify Stroop Task</a></li>
<li><a href="conditionals.html#exercise-9.-simplify-nested-conditionals"><span class="toc-section-number">3.7.9</span> Exercise 9. Simplify nested conditionals</a></li>
<li><a href="conditionals.html#exercise-10.-flow-chart-conditionals"><span class="toc-section-number">3.7.10</span> Exercise 10. Flow chart conditionals</a></li>
</ul></li>
<li><a href="conditionals.html#think-further-2"><span class="toc-section-number">3.8</span> Think Further</a></li>
</ul></li>
<li><a href="lists.html#lists"><span class="toc-section-number">4</span> Lists</a>
<ul>
<li><a href="lists.html#lists-1"><span class="toc-section-number">4.1</span> Lists</a>
<ul>
<li><a href="lists.html#lists-are-mutable"><span class="toc-section-number">4.1.1</span> Lists are mutable</a></li>
</ul></li>
<li><a href="lists.html#tuples"><span class="toc-section-number">4.2</span> Tuples</a></li>
<li><a href="lists.html#dictionaries"><span class="toc-section-number">4.3</span> Dictionaries</a></li>
<li><a href="lists.html#putting-collections-to-use"><span class="toc-section-number">4.4</span> Putting collections to use</a></li>
<li><a href="lists.html#common-errors-2"><span class="toc-section-number">4.5</span> Common errors</a></li>
<li><a href="lists.html#debugging-2"><span class="toc-section-number">4.6</span> Debugging</a></li>
<li><a href="lists.html#exercises-3"><span class="toc-section-number">4.7</span> Exercises</a>
<ul>
<li><a href="lists.html#exercise-1.-indexing"><span class="toc-section-number">4.7.1</span> Exercise 1. Indexing</a></li>
<li><a href="lists.html#exercise-2.-debugging"><span class="toc-section-number">4.7.2</span> Exercise 2. Debugging</a></li>
<li><a href="lists.html#exercise-3.-mini-programs-1"><span class="toc-section-number">4.7.3</span> Exercise 3. Mini programs</a></li>
<li><a href="lists.html#exercise-4.-shopping-list"><span class="toc-section-number">4.7.4</span> Exercise 4. Shopping list</a></li>
<li><a href="lists.html#exercise-5.-dictionaries"><span class="toc-section-number">4.7.5</span> Exercise 5. Dictionaries</a></li>
<li><a href="lists.html#exercise-6.-element-selection"><span class="toc-section-number">4.7.6</span> Exercise 6. Element selection</a></li>
<li><a href="lists.html#exercise-7.-adjust-a-dictionary-data-set"><span class="toc-section-number">4.7.7</span> Exercise 7. Adjust a dictionary data set</a></li>
<li><a href="lists.html#exercise-8.-a-dictionary-data-set"><span class="toc-section-number">4.7.8</span> Exercise 8. A dictionary data set</a></li>
<li><a href="lists.html#exercise-9.-stroop-extension"><span class="toc-section-number">4.7.9</span> Exercise 9. Stroop extension</a></li>
</ul></li>
<li><a href="lists.html#think-further-3"><span class="toc-section-number">4.8</span> Think further</a></li>
</ul></li>
<li><a href="loops.html#loops"><span class="toc-section-number">5</span> Loops</a>
<ul>
<li><a href="loops.html#the-for-loop"><span class="toc-section-number">5.1</span> The <code>for</code> loop</a></li>
<li><a href="loops.html#the-while-loop"><span class="toc-section-number">5.2</span> The <code>while</code> loop</a>
<ul>
<li><a href="loops.html#for-or-while"><span class="toc-section-number">5.2.1</span> <code>for</code> or <code>while</code>?</a></li>
</ul></li>
<li><a href="loops.html#the-break-statement"><span class="toc-section-number">5.3</span> The <code>break</code> statement</a></li>
<li><a href="loops.html#controlling-the-flow-of-your-program-with-loops"><span class="toc-section-number">5.4</span> Controlling the flow of your program with loops</a></li>
<li><a href="loops.html#common-errors-3"><span class="toc-section-number">5.5</span> Common errors</a></li>
<li><a href="loops.html#debugging-3"><span class="toc-section-number">5.6</span> Debugging</a></li>
<li><a href="loops.html#exercises-4"><span class="toc-section-number">5.7</span> Exercises</a>
<ul>
<li><a href="loops.html#exercise-1.-following-the-control-flow-i"><span class="toc-section-number">5.7.1</span> Exercise 1. Following the control flow I</a></li>
<li><a href="loops.html#exercise-2.-debugging-i"><span class="toc-section-number">5.7.2</span> Exercise 2. Debugging I</a></li>
<li><a href="loops.html#exercise-3.-a-guessing-game"><span class="toc-section-number">5.7.3</span> Exercise 3. A guessing game</a></li>
<li><a href="loops.html#exercise-4.-controlling-the-flow"><span class="toc-section-number">5.7.4</span> Exercise 4. Controlling the flow</a></li>
<li><a href="loops.html#exercise-5.-following-the-control-flow-ii"><span class="toc-section-number">5.7.5</span> Exercise 5. Following the control flow II</a></li>
<li><a href="loops.html#exercise-6.-debugging-ii"><span class="toc-section-number">5.7.6</span> Exercise 6. Debugging II</a></li>
<li><a href="loops.html#exercise-7.-nested-loops"><span class="toc-section-number">5.7.7</span> Exercise 7. Nested loops</a></li>
<li><a href="loops.html#exercise-8.-data-transformation-using-loops"><span class="toc-section-number">5.7.8</span> Exercise 8. Data transformation using loops</a></li>
<li><a href="loops.html#exercise-9.-calculating-a-mean"><span class="toc-section-number">5.7.9</span> Exercise 9. Calculating a mean</a></li>
</ul></li>
<li><a href="loops.html#think-further-4"><span class="toc-section-number">5.8</span> Think Further</a></li>
</ul></li>
<li><a href="functions.html#functions"><span class="toc-section-number">6</span> Functions</a>
<ul>
<li><a href="functions.html#defining-and-calling-functions"><span class="toc-section-number">6.1</span> Defining and calling functions</a></li>
<li><a href="functions.html#function-parameters-and-arguments"><span class="toc-section-number">6.2</span> Function parameters and arguments</a></li>
<li><a href="functions.html#the-return-statement"><span class="toc-section-number">6.3</span> The <code>return</code> statement</a></li>
<li><a href="functions.html#functions-can-call-other-functions-and-themselves"><span class="toc-section-number">6.4</span> Functions can call other functions, and themselves</a>
<ul>
<li><a href="functions.html#a-word-about-recursion"><span class="toc-section-number">6.4.1</span> A word about <em>Recursion</em></a></li>
</ul></li>
<li><a href="functions.html#stroop-functions"><span class="toc-section-number">6.5</span> Stroop functions</a></li>
<li><a href="functions.html#common-errors-4"><span class="toc-section-number">6.6</span> Common errors</a></li>
<li><a href="functions.html#exercises-5"><span class="toc-section-number">6.7</span> Exercises</a>
<ul>
<li><a href="functions.html#exercise-1.-following-the-control-flow"><span class="toc-section-number">6.7.1</span> Exercise 1. Following the control flow</a></li>
<li><a href="functions.html#exercise-2.-an-imperfect-list-sorting-attempt"><span class="toc-section-number">6.7.2</span> Exercise 2. An imperfect list sorting attempt</a></li>
<li><a href="functions.html#exercise-3.-an-erroneous-sorting-algorithm"><span class="toc-section-number">6.7.3</span> Exercise 3. An erroneous sorting algorithm</a></li>
<li><a href="functions.html#exercise-4.-chunking"><span class="toc-section-number">6.7.4</span> Exercise 4. Chunking</a></li>
<li><a href="functions.html#exercise-5.-add-functionality-to-the-stroop-task"><span class="toc-section-number">6.7.5</span> Exercise 5. Add functionality to the stroop task</a></li>
<li><a href="functions.html#exercise-6.-insertion-sort-algorithm"><span class="toc-section-number">6.7.6</span> Exercise 6. Insertion sort algorithm</a></li>
</ul></li>
<li><a href="functions.html#think-further-5"><span class="toc-section-number">6.8</span> Think further</a></li>
<li><a href="functions.html#references"><span class="toc-section-number">6.9</span> References</a></li>
</ul></li>
<li><a href="data.html#data"><span class="toc-section-number">7</span> Working with data</a>
<ul>
<li><a href="data.html#elements-of-data-processing"><span class="toc-section-number">7.1</span> Elements of data processing</a></li>
<li><a href="data.html#data-tables"><span class="toc-section-number">7.2</span> Data tables</a></li>
<li><a href="data.html#down-the-sink-writing-data-files"><span class="toc-section-number">7.3</span> Down the sink: Writing data files</a></li>
<li><a href="data.html#may-the-source-reading-data-files"><span class="toc-section-number">7.4</span> May the source …: reading data files</a></li>
<li><a href="data.html#exercises-6"><span class="toc-section-number">7.5</span> Exercises</a>
<ul>
<li><a href="data.html#exercise-1"><span class="toc-section-number">7.5.1</span> Exercise 1</a></li>
<li><a href="data.html#exercise-2"><span class="toc-section-number">7.5.2</span> Exercise 2</a></li>
</ul></li>
<li><a href="data.html#think-further-6"><span class="toc-section-number">7.6</span> Think further</a></li>
<li><a href="data.html#references-1"><span class="toc-section-number">7.7</span> References</a></li>
</ul></li>
<li><a href="interaction.html#interaction"><span class="toc-section-number">8</span> Interaction</a>
<ul>
<li><a href="interaction.html#interaction-models"><span class="toc-section-number">8.1</span> Interaction models</a>
<ul>
<li><a href="interaction.html#identifying-states"><span class="toc-section-number">8.1.1</span> Identifying states</a></li>
<li><a href="interaction.html#identifying-transitions"><span class="toc-section-number">8.1.2</span> Identifying transitions</a></li>
<li><a href="interaction.html#events-user-input-and-internal-conditions"><span class="toc-section-number">8.1.3</span> Events: user input and internal conditions</a></li>
<li><a href="interaction.html#exercises-7"><span class="toc-section-number">8.1.4</span> Exercises</a></li>
</ul></li>
<li><a href="interaction.html#programming-interactive-prototypes"><span class="toc-section-number">8.2</span> Programming interactive prototypes</a>
<ul>
<li><a href="interaction.html#interactive-transitionals"><span class="toc-section-number">8.2.1</span> Interactive transitionals</a></li>
<li><a href="interaction.html#automatic-transitions"><span class="toc-section-number">8.2.2</span> Automatic transitions</a></li>
<li><a href="interaction.html#the-timestamp-method"><span class="toc-section-number">8.2.3</span> The timestamp method</a></li>
<li><a href="interaction.html#presentation-conditionals"><span class="toc-section-number">8.2.4</span> Presentation conditionals</a></li>
</ul></li>
<li><a href="interaction.html#interactions-in-pygame"><span class="toc-section-number">8.3</span> Interactions in Pygame</a>
<ul>
<li><a href="interaction.html#overall-structure"><span class="toc-section-number">8.3.1</span> Overall structure</a></li>
<li><a href="interaction.html#the-screen-and-the-refresh-loop."><span class="toc-section-number">8.3.2</span> The screen and the refresh loop.</a></li>
<li><a href="interaction.html#handling-user-input"><span class="toc-section-number">8.3.3</span> Handling user input</a></li>
<li><a href="interaction.html#transitionals"><span class="toc-section-number">8.3.4</span> Transitionals</a></li>
<li><a href="interaction.html#pygame-events"><span class="toc-section-number">8.3.5</span> Pygame events</a></li>
</ul></li>
<li><a href="interaction.html#presentitionals"><span class="toc-section-number">8.4</span> Presentitionals in Pygame</a>
<ul>
<li><a href="interaction.html#display-and-surface"><span class="toc-section-number">8.4.1</span> Display and surface</a></li>
<li><a href="interaction.html#drawing-figures"><span class="toc-section-number">8.4.2</span> Drawing figures</a></li>
<li><a href="interaction.html#placing-text-and-pictures"><span class="toc-section-number">8.4.3</span> Placing text and pictures</a></li>
</ul></li>
<li><a href="interaction.html#exercises-8"><span class="toc-section-number">8.5</span> Exercises</a>
<ul>
<li><a href="interaction.html#exercise-c.-transition-tables"><span class="toc-section-number">8.5.1</span> Exercise C. Transition tables</a></li>
</ul></li>
<li><a href="interaction.html#common-errors-5"><span class="toc-section-number">8.6</span> Common errors</a></li>
<li><a href="interaction.html#think-further-7"><span class="toc-section-number">8.7</span> Think Further</a></li>
</ul></li>
<li><a href="solutions.html#solutions"><span class="toc-section-number">9</span> Solutions</a>
<ul>
<li><a href="solutions.html#chapter-1.-introduction"><span class="toc-section-number">9.1</span> Chapter 1. Introduction</a></li>
<li><a href="solutions.html#chapter-2.-variables-values-and-types"><span class="toc-section-number">9.2</span> Chapter 2. Variables, values and types</a>
<ul>
<li><a href="solutions.html#exercise-1.-operators-1"><span class="toc-section-number">9.2.1</span> Exercise 1. Operators</a></li>
<li><a href="solutions.html#exercise-2.-values-1"><span class="toc-section-number">9.2.2</span> Exercise 2. Values</a></li>
<li><a href="solutions.html#exercise-3.-mini-programs-2"><span class="toc-section-number">9.2.3</span> Exercise 3. Mini programs</a></li>
<li><a href="solutions.html#exercise-4.-debugging-1"><span class="toc-section-number">9.2.4</span> Exercise 4. Debugging</a></li>
<li><a href="solutions.html#exercise-5.-string-concatenation-1"><span class="toc-section-number">9.2.5</span> Exercise 5. String concatenation</a></li>
<li><a href="solutions.html#exercise-6.-variable-names-1"><span class="toc-section-number">9.2.6</span> Exercise 6. Variable names</a></li>
<li><a href="solutions.html#exercise-7.-stroop-task-welcome-message-1"><span class="toc-section-number">9.2.7</span> Exercise 7. Stroop task welcome message</a></li>
<li><a href="solutions.html#exercise-8.-printing-1"><span class="toc-section-number">9.2.8</span> Exercise 8. Printing</a></li>
<li><a href="solutions.html#exercise-9.-using-python-as-calculator"><span class="toc-section-number">9.2.9</span> Exercise 9. Using Python as calculator</a></li>
<li><a href="solutions.html#exercise-10.-a-boolean-puzzle-1"><span class="toc-section-number">9.2.10</span> Exercise 10. A Boolean puzzle</a></li>
</ul></li>
<li><a href="solutions.html#chapter-3.-conditionals"><span class="toc-section-number">9.3</span> Chapter 3. Conditionals</a>
<ul>
<li><a href="solutions.html#exercise-1.-boolean-logic-1"><span class="toc-section-number">9.3.1</span> Exercise 1. Boolean logic</a></li>
<li><a href="solutions.html#exercise-2.-state-charts-1"><span class="toc-section-number">9.3.2</span> Exercise 2. State charts</a></li>
<li><a href="solutions.html#exercise-3.-transition-tables-1"><span class="toc-section-number">9.3.3</span> Exercise 3. Transition tables</a></li>
<li><a href="solutions.html#exercise-4.-mini-programs-1"><span class="toc-section-number">9.3.4</span> Exercise 4. Mini programs</a></li>
<li><a href="solutions.html#exercise-5.-following-the-control-flow-1"><span class="toc-section-number">9.3.5</span> Exercise 5. Following the control flow</a></li>
<li><a href="solutions.html#exercise-6.-indentation-1"><span class="toc-section-number">9.3.6</span> Exercise 6. Indentation</a></li>
<li><a href="solutions.html#exercise-7.-pseudo-code-conditionals-1"><span class="toc-section-number">9.3.7</span> Exercise 7. Pseudo code conditionals</a></li>
<li><a href="solutions.html#exercise-8.-modify-stroop-task-1"><span class="toc-section-number">9.3.8</span> Exercise 8. Modify Stroop Task</a></li>
<li><a href="solutions.html#exercise-9.-simplify-nested-conditionals-1"><span class="toc-section-number">9.3.9</span> Exercise 9. Simplify nested conditionals</a></li>
<li><a href="solutions.html#exercise-10.-flow-chart-conditionals-1"><span class="toc-section-number">9.3.10</span> Exercise 10. Flow chart conditionals</a></li>
</ul></li>
<li><a href="solutions.html#chapter-4.-lists"><span class="toc-section-number">9.4</span> Chapter 4. Lists</a>
<ul>
<li><a href="solutions.html#exercise-1.-indexing-1"><span class="toc-section-number">9.4.1</span> Exercise 1. Indexing</a></li>
<li><a href="solutions.html#exercise-2.-debugging-1"><span class="toc-section-number">9.4.2</span> Exercise 2. Debugging</a></li>
<li><a href="solutions.html#exercise-3.-mini-programs-3"><span class="toc-section-number">9.4.3</span> Exercise 3. Mini programs</a></li>
<li><a href="solutions.html#exercise-1.-shopping-list"><span class="toc-section-number">9.4.4</span> Exercise 1. Shopping list</a></li>
<li><a href="solutions.html#exercise-2.-dictionnaries"><span class="toc-section-number">9.4.5</span> Exercise 2. Dictionnaries</a></li>
<li><a href="solutions.html#exercise-3.-selecting-elements"><span class="toc-section-number">9.4.6</span> Exercise 3. Selecting elements</a></li>
<li><a href="solutions.html#exercise-4.-adjust-a-dictionnary-data-set"><span class="toc-section-number">9.4.7</span> Exercise 4. Adjust a dictionnary data set</a></li>
<li><a href="solutions.html#exercise-5.-a-dictionnary-data-set"><span class="toc-section-number">9.4.8</span> Exercise 5. A dictionnary data set</a></li>
<li><a href="solutions.html#exercise-6.-stroop-extension"><span class="toc-section-number">9.4.9</span> Exercise 6. Stroop extension</a></li>
</ul></li>
<li><a href="solutions.html#chapter-5.-loops"><span class="toc-section-number">9.5</span> Chapter 5. Loops</a>
<ul>
<li><a href="solutions.html#exercise-1.-following-the-control-flow-i-1"><span class="toc-section-number">9.5.1</span> Exercise 1. Following the control flow I</a></li>
<li><a href="solutions.html#exercise-2.-debugging-i-1"><span class="toc-section-number">9.5.2</span> Exercise 2. Debugging I</a></li>
<li><a href="solutions.html#exercise-3.-controlling-the-flow"><span class="toc-section-number">9.5.3</span> Exercise 3. Controlling the flow</a></li>
<li><a href="solutions.html#exercise-4.-following-the-control-flow-ii"><span class="toc-section-number">9.5.4</span> Exercise 4. Following the control flow II</a></li>
<li><a href="solutions.html#exercise-5.-debugging"><span class="toc-section-number">9.5.5</span> Exercise 5. Debugging</a></li>
<li><a href="solutions.html#exercise-6.-nested-loops"><span class="toc-section-number">9.5.6</span> Exercise 6. Nested loops</a></li>
<li><a href="solutions.html#exercise-7.-data-transformation-using-loops"><span class="toc-section-number">9.5.7</span> Exercise 7. Data transformation using loops</a></li>
<li><a href="solutions.html#exercise-8.-calculating-a-mean"><span class="toc-section-number">9.5.8</span> Exercise 8. Calculating a mean</a></li>
<li><a href="solutions.html#exercise-9.-a-guessing-game"><span class="toc-section-number">9.5.9</span> Exercise 9. A guessing game</a></li>
</ul></li>
<li><a href="solutions.html#chapter-6.-functions"><span class="toc-section-number">9.6</span> Chapter 6. Functions</a>
<ul>
<li><a href="solutions.html#exercise-1.-following-the-control-flow-1"><span class="toc-section-number">9.6.1</span> Exercise 1. Following the control flow</a></li>
<li><a href="solutions.html#exercise-2.-an-imperfect-list-sorting-attempt-1"><span class="toc-section-number">9.6.2</span> Exercise 2. An imperfect list sorting attempt</a></li>
<li><a href="solutions.html#exercise-3.-an-errorneous-sorting-algorithm"><span class="toc-section-number">9.6.3</span> Exercise 3. An errorneous sorting algorithm</a></li>
<li><a href="solutions.html#exercise-4."><span class="toc-section-number">9.6.4</span> Exercise 4.</a></li>
<li><a href="solutions.html#exercise-5."><span class="toc-section-number">9.6.5</span> Exercise 5.</a></li>
<li><a href="solutions.html#exercise-6.-insertion-sort-algorithm-1"><span class="toc-section-number">9.6.6</span> Exercise 6. Insertion sort algorithm</a></li>
</ul></li>
</ul></li>
<li><a href="debugging-and-good-programming-practices.html#debugging-and-good-programming-practices"><span class="toc-section-number">10</span> Debugging and good programming practices</a>
<ul>
<li><a href="debugging-and-good-programming-practices.html#debugging-4"><span class="toc-section-number">10.1</span> Debugging</a></li>
<li><a href="debugging-and-good-programming-practices.html#boosting-your-programming-learning-curve"><span class="toc-section-number">10.2</span> Boosting your programming learning curve</a>
<ul>
<li><a href="debugging-and-good-programming-practices.html#going-with-the-flow"><span class="toc-section-number">10.2.1</span> Going with the flow</a></li>
<li><a href="debugging-and-good-programming-practices.html#just-do-it"><span class="toc-section-number">10.2.2</span> Just do it!</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="data" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Working with data</h1>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="data.html#cb417-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb417-2"><a href="data.html#cb417-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.2     v dplyr   1.0.6
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.1.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div id="elements-of-data-processing" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Elements of data processing</h2>
<p>In the previous chapter we have dealt with functions as reusable pieces of code. There is another common notion of what a function is: <em>a function processes data</em>. The basic model of data processing is the following:</p>
<div id="htmlwidget-295415a6f581ce5bed31" style="width:672px;height:480px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-295415a6f581ce5bed31">{"x":{"diagram":"graph LR\nIN(Input Data) --> PROC[Function]\nPROC --> OUT(Output Data)"},"evals":[],"jsHooks":[]}</script>
<p>So, what is data? As psychologists we are used to think of data as observations from empirical studies that we process by statistical procedures. That precisely matches our above model:</p>
<div id="htmlwidget-0fc4a67879febc6c3b1b" style="width:672px;height:480px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-0fc4a67879febc6c3b1b">{"x":{"diagram":"graph LR\nIN(Observations) --> PROC[t-test]\nPROC --> OUT(p-value)"},"evals":[],"jsHooks":[]}</script>
<p>In Python, as a general programming language, there exist libraries that implement tables of observations, as well as the t-test (and more modern statistical procedures, luckily). However, we don’t want to bother you with statistics for the moment. Instead, take another look at two function that we have introduced in <a href="functions.html#functions">6</a>:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb422-1"><a href="data.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> summation(alist):</span>
<span id="cb422-2"><a href="data.html#cb422-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">sum</span> <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb422-3"><a href="data.html#cb422-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(alist)):</span>
<span id="cb422-4"><a href="data.html#cb422-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">sum</span> <span class="op">+=</span> alist[i]</span>
<span id="cb422-5"><a href="data.html#cb422-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Sum of the list is:&quot;</span>, <span class="bu">sum</span>)</span>
<span id="cb422-6"><a href="data.html#cb422-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span></span>
<span id="cb422-7"><a href="data.html#cb422-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb422-8"><a href="data.html#cb422-8" aria-hidden="true" tabindex="-1"></a>summation([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>])</span></code></pre></div>
<pre><code>## Sum of the list is: 10.0
## 10.0</code></pre>
<p>The function <code>summation</code> takes a list of values and computes the sum. Again, that satisfies the basic model of data processing:</p>
<div id="htmlwidget-3a7dcab517c3c0f76258" style="width:672px;height:480px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-3a7dcab517c3c0f76258">{"x":{"diagram":"graph LR\nIN(List of numbers) --> PROC[Summation]\nPROC --> OUT(sum)"},"evals":[],"jsHooks":[]}</script>
<p>It is easy to see how input and output are implemented with Python functions:</p>
<ul>
<li>function arguments provide the input</li>
<li>the function body does the processing</li>
<li>the return statement gives the output</li>
</ul>
<p>Consequently, every function that takes arguments and has a return statement can be considered data processing. Furthermore, data processing can take place as chains. Let’s take the variance of a list of numbers as an example. The formula for variance, shown below, reveals that the variance statistic is produces in three steps: first, the residuals are computed, these are squared an finally the mean value is taken.</p>
<div id="htmlwidget-33a44ee2a02132019607" style="width:672px;height:480px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-33a44ee2a02132019607">{"x":{"diagram":"graph LR\n IN(List of numbers) --> PROC_1[square residuals]\n PROC_1 --> OUT_1(List of squared residuals)\n OUT_1 --> PROC_2[take the mean]\n PROC_2 --> OUT(Variance)"},"evals":[],"jsHooks":[]}</script>
<p>Let’s see how this is implemnented in Python. For the squared residuals, we create our own function, but resort to the function <code>mean</code> in the <code>numpy</code> library. Note how the two defined functions operate on a dedicated list for output, rather than modifying the original one. Recall that lists are called by reference, which means the original list would otherwise be altered by the function.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb424-1"><a href="data.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> mean</span>
<span id="cb424-2"><a href="data.html#cb424-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-3"><a href="data.html#cb424-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> residuals(lon):</span>
<span id="cb424-4"><a href="data.html#cb424-4" aria-hidden="true" tabindex="-1"></a>    avg <span class="op">=</span> mean(lon)</span>
<span id="cb424-5"><a href="data.html#cb424-5" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb424-6"><a href="data.html#cb424-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> lon:</span>
<span id="cb424-7"><a href="data.html#cb424-7" aria-hidden="true" tabindex="-1"></a>          output.append((i <span class="op">-</span> avg))</span>
<span id="cb424-8"><a href="data.html#cb424-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb424-9"><a href="data.html#cb424-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-10"><a href="data.html#cb424-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> square(lon):</span>
<span id="cb424-11"><a href="data.html#cb424-11" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb424-12"><a href="data.html#cb424-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> lon:</span>
<span id="cb424-13"><a href="data.html#cb424-13" aria-hidden="true" tabindex="-1"></a>          output.append(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb424-14"><a href="data.html#cb424-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb424-15"><a href="data.html#cb424-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-16"><a href="data.html#cb424-16" aria-hidden="true" tabindex="-1"></a>LON <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">9</span>]</span>
<span id="cb424-17"><a href="data.html#cb424-17" aria-hidden="true" tabindex="-1"></a>RES <span class="op">=</span> residuals(LON)</span>
<span id="cb424-18"><a href="data.html#cb424-18" aria-hidden="true" tabindex="-1"></a>SQR <span class="op">=</span> square(RES)</span>
<span id="cb424-19"><a href="data.html#cb424-19" aria-hidden="true" tabindex="-1"></a>VAR <span class="op">=</span> mean(SQR)</span>
<span id="cb424-20"><a href="data.html#cb424-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-21"><a href="data.html#cb424-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(VAR)</span></code></pre></div>
<pre><code>## 12.5</code></pre>
<p>The above code represents such a data processing in such a way that the intermediate results are stored in dedicated variables (<code>RES</code>, <code>SQR</code>). While this makes the processing chain clear in the code, for longer chains there is the downside of length and cluttering the program with variables that are just used once. A more compact form to write the chain is by <em>nesting function</em>:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb426-1"><a href="data.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> mean</span>
<span id="cb426-2"><a href="data.html#cb426-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-3"><a href="data.html#cb426-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> residuals(lon):</span>
<span id="cb426-4"><a href="data.html#cb426-4" aria-hidden="true" tabindex="-1"></a>    avg <span class="op">=</span> mean(lon)</span>
<span id="cb426-5"><a href="data.html#cb426-5" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb426-6"><a href="data.html#cb426-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> lon:</span>
<span id="cb426-7"><a href="data.html#cb426-7" aria-hidden="true" tabindex="-1"></a>          output.append((i <span class="op">-</span> avg))</span>
<span id="cb426-8"><a href="data.html#cb426-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb426-9"><a href="data.html#cb426-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-10"><a href="data.html#cb426-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> square(lon):</span>
<span id="cb426-11"><a href="data.html#cb426-11" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb426-12"><a href="data.html#cb426-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> lon:</span>
<span id="cb426-13"><a href="data.html#cb426-13" aria-hidden="true" tabindex="-1"></a>          output.append(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb426-14"><a href="data.html#cb426-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb426-15"><a href="data.html#cb426-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb426-16"><a href="data.html#cb426-16" aria-hidden="true" tabindex="-1"></a>LON <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">9</span>]</span>
<span id="cb426-17"><a href="data.html#cb426-17" aria-hidden="true" tabindex="-1"></a>VAR <span class="op">=</span> mean(square(residuals(LON)))</span>
<span id="cb426-18"><a href="data.html#cb426-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(VAR)</span></code></pre></div>
<pre><code>## 12.5</code></pre>
<p>Nested function are evaluated inside-out. Consequently, when setting up such a chain, one begins with the first processing step and builds the subsequent one “around” it. While this is conveniently compact, it lacks the intuition of the data processing chain. Therefore, it is best in many situations, to encapsulate the whole line as a dedicated function:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb428-1"><a href="data.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> mean</span>
<span id="cb428-2"><a href="data.html#cb428-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-3"><a href="data.html#cb428-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> residuals(lon):</span>
<span id="cb428-4"><a href="data.html#cb428-4" aria-hidden="true" tabindex="-1"></a>    avg <span class="op">=</span> mean(lon)</span>
<span id="cb428-5"><a href="data.html#cb428-5" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb428-6"><a href="data.html#cb428-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> lon:</span>
<span id="cb428-7"><a href="data.html#cb428-7" aria-hidden="true" tabindex="-1"></a>          output.append((i <span class="op">-</span> avg))</span>
<span id="cb428-8"><a href="data.html#cb428-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb428-9"><a href="data.html#cb428-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-10"><a href="data.html#cb428-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> square(lon):</span>
<span id="cb428-11"><a href="data.html#cb428-11" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb428-12"><a href="data.html#cb428-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> lon:</span>
<span id="cb428-13"><a href="data.html#cb428-13" aria-hidden="true" tabindex="-1"></a>          output.append(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb428-14"><a href="data.html#cb428-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb428-15"><a href="data.html#cb428-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-16"><a href="data.html#cb428-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> variance(lon):</span>
<span id="cb428-17"><a href="data.html#cb428-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mean(square(residuals(lon)))</span>
<span id="cb428-18"><a href="data.html#cb428-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb428-19"><a href="data.html#cb428-19" aria-hidden="true" tabindex="-1"></a>LON <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">9</span>]</span>
<span id="cb428-20"><a href="data.html#cb428-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(variance(LON))</span></code></pre></div>
<pre><code>## 12.5</code></pre>
<p>This simple example highlights another important aspect about the data processing model: models can be nested. The function variance is itself a data processing chain, but it can take a role in a more global data processing chain. For example, when you prepare a summary statistics table for your report, you use the variance function as part of it. You do care about its required input and know what it will produce, but you don’t worry about the above processing chain, anymore. That is called a <em>black box</em>.</p>
</div>
<div id="data-tables" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Data tables</h2>
<p>The purpose of psychological experiments is to collect data from participants under various conditions. Imagine you wanted to analyze the data from a single participant in the Stroop task. Perhaps, you wanted to analyze it as a factorial linear model (or ANOVA, if you like). Your data analysis program most likely expects the data in the following form:</p>
<table>
<thead>
<tr class="header">
<th align="left">Condition</th>
<th align="left">Correctness</th>
<th align="right">RT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">congruent</td>
<td align="left">TRUE</td>
<td align="right">800.9212</td>
</tr>
<tr class="even">
<td align="left">congruent</td>
<td align="left">FALSE</td>
<td align="right">696.8643</td>
</tr>
<tr class="odd">
<td align="left">congruent</td>
<td align="left">TRUE</td>
<td align="right">765.2435</td>
</tr>
<tr class="even">
<td align="left">congruent</td>
<td align="left">FALSE</td>
<td align="right">814.3323</td>
</tr>
<tr class="odd">
<td align="left">incongruent</td>
<td align="left">TRUE</td>
<td align="right">630.5570</td>
</tr>
<tr class="even">
<td align="left">incongruent</td>
<td align="left">FALSE</td>
<td align="right">686.0606</td>
</tr>
<tr class="odd">
<td align="left">incongruent</td>
<td align="left">TRUE</td>
<td align="right">693.3339</td>
</tr>
<tr class="even">
<td align="left">incongruent</td>
<td align="left">TRUE</td>
<td align="right">731.7975</td>
</tr>
</tbody>
</table>
<p>How would you create such a table in Python? The most simple form is to regard every column as a separate list and you would initialize the data gathering by creating three empty lists. In the main part of the program you can then populate the three lists separately, for example:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb430-1"><a href="data.html#cb430-1" aria-hidden="true" tabindex="-1"></a>Condition <span class="op">=</span> []</span>
<span id="cb430-2"><a href="data.html#cb430-2" aria-hidden="true" tabindex="-1"></a>Correctness <span class="op">=</span> []</span>
<span id="cb430-3"><a href="data.html#cb430-3" aria-hidden="true" tabindex="-1"></a>RT <span class="op">=</span> []</span>
<span id="cb430-4"><a href="data.html#cb430-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-5"><a href="data.html#cb430-5" aria-hidden="true" tabindex="-1"></a>Condition.append(this_condition)</span>
<span id="cb430-6"><a href="data.html#cb430-6" aria-hidden="true" tabindex="-1"></a>Correctness.append(this_correctness)</span>
<span id="cb430-7"><a href="data.html#cb430-7" aria-hidden="true" tabindex="-1"></a>RT.append(this_reaction_time)</span></code></pre></div>
</div>
<div id="down-the-sink-writing-data-files" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Down the sink: Writing data files</h2>
<p>In the case of psychological experiments, the main part of the data processing is most likely done in other programs, such as R, SPSS or Excel. These programs can make little use of data that is stored in Python variables. Rather, data is read in from files. While all programs have their own data format for tables (and specialized functions exist for some), the Lingua Franca of file based data exchange is the <em>comma-separated-values (CSV)</em> form. This is almost as easy as it sounds:</p>
<ul>
<li>every row of data is represented as a row of text</li>
<li>all values in a row are separated by commata</li>
</ul>
<p>The example data set above would look like the following in CSV:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="data.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(D_Stroop, <span class="at">file =</span> <span class="st">&quot;&quot;</span>, <span class="at">eol =</span> <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## &quot;&quot;,&quot;Condition&quot;,&quot;Correctness&quot;,&quot;RT&quot;
## 
## &quot;1&quot;,&quot;congruent&quot;,TRUE,800.921185693852
## 
## &quot;2&quot;,&quot;congruent&quot;,FALSE,696.864295047379
## 
## &quot;3&quot;,&quot;congruent&quot;,TRUE,765.243482711174
## 
## &quot;4&quot;,&quot;congruent&quot;,FALSE,814.332269635055
## 
## &quot;5&quot;,&quot;incongruent&quot;,TRUE,630.556964944383
## 
## &quot;6&quot;,&quot;incongruent&quot;,FALSE,686.060561659131
## 
## &quot;7&quot;,&quot;incongruent&quot;,TRUE,693.333933180317
## 
## &quot;8&quot;,&quot;incongruent&quot;,TRUE,731.797519903504</code></pre>
<p>In order to write such a file, we could use a loop function, together with string concatenation. Fortunately, the <code>csv</code> library that comes with Python implements CSV export right-away. However, it is not as simple as issueing just one command.
Dealing with files is an issue on its own. Unlike variables, which are linked to a running program, files are just dumb sinks on the hard disk on your computer. What must not happen is that, for example, two programs modify the file simultaneously, as this would create a mess. Therefore, the operating system takes special care of files and ensures that only one programn can write it at a time (simultaneous reading is less of a problem). To signal the operating system that a file is being written, some decoration is necessary. More specifically, the programmer must first create a <em>fileg handler</em> on the file, which is what the command <code>open</code> does.</p>
<p>Then the csv library commands operate on the writing handler. This happens by means of a <em>writing handler</em>, which is created by the function <code>csv.writer</code>. Then, the function <code>writerow</code> adds the rows of a table, one by one. That is slightly inconvenient, because our data table is arranged by columns (the three lists) in the first place. For that reason, the <code>for</code> loops first gathers every row of the table as a list <code>this_row</code>.
And finally, the <code>close</code> command signals the operating system that the file is no longer in use.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb433-1"><a href="data.html#cb433-1" aria-hidden="true" tabindex="-1"></a>Condition <span class="op">=</span> [<span class="st">&quot;incongruent&quot;</span>, <span class="st">&quot;incongruent&quot;</span>, <span class="st">&quot;congruent&quot;</span>]</span>
<span id="cb433-2"><a href="data.html#cb433-2" aria-hidden="true" tabindex="-1"></a>Correctness <span class="op">=</span> [<span class="va">False</span>, <span class="va">False</span>, <span class="va">True</span>]</span>
<span id="cb433-3"><a href="data.html#cb433-3" aria-hidden="true" tabindex="-1"></a>RT <span class="op">=</span> [<span class="dv">800</span>, <span class="dv">696</span>, <span class="dv">765</span>]</span>
<span id="cb433-4"><a href="data.html#cb433-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-5"><a href="data.html#cb433-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb433-6"><a href="data.html#cb433-6" aria-hidden="true" tabindex="-1"></a>myfile <span class="op">=</span>  <span class="bu">open</span>(<span class="st">&quot;Stroop.csv&quot;</span>, mode <span class="op">=</span> <span class="st">&quot;w&quot;</span>)</span>
<span id="cb433-7"><a href="data.html#cb433-7" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> csv.writer(myfile)</span>
<span id="cb433-8"><a href="data.html#cb433-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(Condition)):</span>
<span id="cb433-9"><a href="data.html#cb433-9" aria-hidden="true" tabindex="-1"></a>    thisrow <span class="op">=</span> [Condition[i], Correctness[i], RT[i]]</span>
<span id="cb433-10"><a href="data.html#cb433-10" aria-hidden="true" tabindex="-1"></a>    writer.writerow(thisrow)</span></code></pre></div>
<pre><code>## 23
## 23
## 20</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb435-1"><a href="data.html#cb435-1" aria-hidden="true" tabindex="-1"></a>myfile.close()</span></code></pre></div>
<p>As a general rule, it is good to keep the period between open and close short. Especially, one should not open the file at the start of the program and close it when it quits. Programs in development (and written by apprentices) tend to crash and that means data loss and potential file corruption. The safest way probably is to open the file after an observation has been gathered, append the observation and close it immediatly.</p>
<p>So how do we append rows to an existing file? A closer look at the <code>open</code> function reveals that it takes a second parameter, the <code>mode</code>, which is of type string. Three major mode exists (plus a bunch of fine-tuning options):</p>
<table>
<thead>
<tr class="header">
<th align="left">mode</th>
<th align="left"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">r</td>
<td align="left">reading</td>
</tr>
<tr class="even">
<td align="left">w</td>
<td align="left">writing</td>
</tr>
<tr class="odd">
<td align="left">a</td>
<td align="left">appending</td>
</tr>
</tbody>
</table>
<p>Hence, the code for writing an observation one-by-one could be:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb436-1"><a href="data.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb436-2"><a href="data.html#cb436-2" aria-hidden="true" tabindex="-1"></a>myfile <span class="op">=</span>  <span class="bu">open</span>(<span class="st">&quot;Stroop.csv&quot;</span>, mode <span class="op">=</span> <span class="st">&quot;a&quot;</span>)</span>
<span id="cb436-3"><a href="data.html#cb436-3" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> csv.writer(myfile)</span>
<span id="cb436-4"><a href="data.html#cb436-4" aria-hidden="true" tabindex="-1"></a>writer.writerow([thisCondition, thisCorrectness, thisRT])</span>
<span id="cb436-5"><a href="data.html#cb436-5" aria-hidden="true" tabindex="-1"></a>myfile.close()</span></code></pre></div>
</div>
<div id="may-the-source-reading-data-files" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> May the source …: reading data files</h2>
<p>A processing chain starts with a data source, no matter what. The source can be one of three kinds:</p>
<ol style="list-style-type: decimal">
<li>a function call, for example one that produces random numbers</li>
<li>user input, such as the response time, which is derived from a button press</li>
<li>data files</li>
</ol>
<p>The first two options we have already covered in this course. In the following we will see how to read in data from files. Files are typically produced by other programs. For tables that could be Excel (or a programming editor, if you like). As we have seen, CVS is a good choice.</p>
<p>In the Stroop program, we currently use only one external source of data, the user responses. All other data, like the words andf colors are just coded as list, tupels and dictionaries. Reading data from files seems an unncecessary exercise at first, but in fact can make the program more flexibel when used by non-programmers. A possible scenario for the Stroop task is that different experimenters use it, but with their own sets of colors. Here is how one could do it. First, we prepare a table that assigns color words to their respective RGB codes and save it as a CSV file. Any spreadsheet program is suited for the job.</p>
<p>Lets assume the above table has been created in Excel and saved as <code>Colors.csv</code>. The following Python codes opens the csv file and creates a reader (analog to the writer above). Then four lists are created that will capture the table columns. The for loop walks the reader through the CSV file line-by-line. As the first line of the file (with index 0) typically contains the column names, it is omitted. The result is four lists of the same length which makes a table. By using two integer ramdom numbers, we can select a color word, and the ink color and which we can produce the stimuli.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb437-1"><a href="data.html#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb437-2"><a href="data.html#cb437-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb437-3"><a href="data.html#cb437-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-4"><a href="data.html#cb437-4" aria-hidden="true" tabindex="-1"></a>csv_file   <span class="op">=</span> <span class="bu">open</span>(<span class="st">&quot;Colors.csv&quot;</span>)</span>
<span id="cb437-5"><a href="data.html#cb437-5" aria-hidden="true" tabindex="-1"></a>csv_reader <span class="op">=</span> csv.reader(csv_file)</span>
<span id="cb437-6"><a href="data.html#cb437-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-7"><a href="data.html#cb437-7" aria-hidden="true" tabindex="-1"></a>Color <span class="op">=</span> []</span>
<span id="cb437-8"><a href="data.html#cb437-8" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> []</span>
<span id="cb437-9"><a href="data.html#cb437-9" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> []</span>
<span id="cb437-10"><a href="data.html#cb437-10" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> []</span>
<span id="cb437-11"><a href="data.html#cb437-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-12"><a href="data.html#cb437-12" aria-hidden="true" tabindex="-1"></a>row_number <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb437-13"><a href="data.html#cb437-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-14"><a href="data.html#cb437-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> csv_reader:</span>
<span id="cb437-15"><a href="data.html#cb437-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> row_number <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb437-16"><a href="data.html#cb437-16" aria-hidden="true" tabindex="-1"></a>    Color.append(row[<span class="dv">0</span>])</span>
<span id="cb437-17"><a href="data.html#cb437-17" aria-hidden="true" tabindex="-1"></a>    R.append(row[<span class="dv">1</span>])</span>
<span id="cb437-18"><a href="data.html#cb437-18" aria-hidden="true" tabindex="-1"></a>    G.append(row[<span class="dv">2</span>])</span>
<span id="cb437-19"><a href="data.html#cb437-19" aria-hidden="true" tabindex="-1"></a>    B.append(row[<span class="dv">3</span>])</span>
<span id="cb437-20"><a href="data.html#cb437-20" aria-hidden="true" tabindex="-1"></a>  row_number <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb437-21"><a href="data.html#cb437-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb437-22"><a href="data.html#cb437-22" aria-hidden="true" tabindex="-1"></a>csv_file.close()</span>
<span id="cb437-23"><a href="data.html#cb437-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-24"><a href="data.html#cb437-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-25"><a href="data.html#cb437-25" aria-hidden="true" tabindex="-1"></a>this_word  <span class="op">=</span> random.randint(<span class="dv">0</span>,<span class="dv">2</span>)</span>
<span id="cb437-26"><a href="data.html#cb437-26" aria-hidden="true" tabindex="-1"></a>this_color <span class="op">=</span> random.randint(<span class="dv">0</span>,<span class="dv">2</span>)</span>
<span id="cb437-27"><a href="data.html#cb437-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-28"><a href="data.html#cb437-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Presenting&quot;</span>, </span>
<span id="cb437-29"><a href="data.html#cb437-29" aria-hidden="true" tabindex="-1"></a>Color[this_word], <span class="st">&quot;in color&quot;</span>, Color[this_color], <span class="st">&quot;(&quot;</span>, </span>
<span id="cb437-30"><a href="data.html#cb437-30" aria-hidden="true" tabindex="-1"></a>R[this_color],</span>
<span id="cb437-31"><a href="data.html#cb437-31" aria-hidden="true" tabindex="-1"></a>G[this_color],</span>
<span id="cb437-32"><a href="data.html#cb437-32" aria-hidden="true" tabindex="-1"></a>B[this_color], <span class="st">&quot;)&quot;</span>)</span></code></pre></div>
<pre><code>## Presenting orange in color green ( 0 150 150 )</code></pre>
<!-- To give a more compelling example for when it is useful to load stimuli at runtime: A modified version of the experiment is the primed Stroop task that by which one can assess the strength of certain semantic associations. It differs from the original in that it -->
<!-- + shows a priming picture upfront (e.g. a wolf) -->
<!-- + uses no color words, but target words that the participant may associate with the picture (e.g., the word "grandmother") -->
<!-- The assessment of association strength typically takes place within a certain domain, e.g. attitude towards computers or fairy tales. Researchers may therefore want to use same program, but feed it with different sets of images and target words. What one could do, is: -->
<!-- + import one table with the target words -->
<!-- + import one table with the filenames of all images -->
<!-- + read the images in one-by-one -->
</div>
<div id="exercises-6" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Exercises</h2>
<div id="exercise-1" class="section level3" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Exercise 1</h3>
<p>Write a simple image presentation program, that takes a table of the following form as input and changes to the following picture on key press.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="data.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">File =</span> <span class="fu">c</span>(<span class="st">&quot;Image01.jpg&quot;</span>, <span class="st">&quot;Image02.jpg&quot;</span>, <span class="st">&quot;Image03.jpg&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 1
##   File       
##   &lt;chr&gt;      
## 1 Image01.jpg
## 2 Image02.jpg
## 3 Image03.jpg</code></pre>
<p>When that works, make the program automatic. Add a column to the table that gives the presentation time for an image in seconds.</p>
</div>
<div id="exercise-2" class="section level3" number="7.5.2">
<h3><span class="header-section-number">7.5.2</span> Exercise 2</h3>
<p>With the Python library <code>openpyxl</code> you can read and write Excel files, directly. Work through (this tutorial)[<a href="https://automatetheboringstuff.com/chapter12/" class="uri">https://automatetheboringstuff.com/chapter12/</a>]. Now modify your presentation program to use an Excel files as input.</p>
</div>
</div>
<div id="think-further-6" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Think further</h2>
<p>If you are working with data tables a lot, it may be worth to take a look at the Pandas library. The primary contribution of Pandas is an object class <em>DataFrame</em>, which captures a whole table at once and provides a plethora of useful methods for filtering and manipulation of data. And there are also commands to read and write csv files into a data frame.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb441-1"><a href="data.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas</span>
<span id="cb441-2"><a href="data.html#cb441-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-3"><a href="data.html#cb441-3" aria-hidden="true" tabindex="-1"></a>Colors <span class="op">=</span> pandas.read_csv(<span class="st">&quot;colors.csv&quot;</span>)</span>
<span id="cb441-4"><a href="data.html#cb441-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-5"><a href="data.html#cb441-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Colors)</span></code></pre></div>
<pre><code>##     Color    R    G    B
## 0  violet  180    0  180
## 1   green    0  150  150
## 2  orange  255  150    0</code></pre>
</div>
<div id="references-1" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> References</h2>

</div>
</div>
<p style="text-align: center;">
<a href="functions.html"><button class="btn btn-default">Previous</button></a>
<a href="interaction.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
