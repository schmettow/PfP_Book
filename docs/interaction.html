<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>8 Interaction | Programming for researcher on behaviour</title>
<meta name="author" content="Martin Schmettow and Lena Brandl">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.8/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/d3-3.3.8/d3.min.js"></script><script src="libs/dagre-0.4.0/dagre-d3.min.js"></script><link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet">
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script><link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="libs/chromatography-0.1/chromatography.js"></script><script src="libs/DiagrammeR-binding-1.0.6.1/DiagrammeR.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="A first course in Python">Programming for researcher on behaviour</a>:
        <small class="text-muted">A first course in Python</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="variables.html"><span class="header-section-number">2</span> Variables, values and types</a></li>
<li><a class="" href="conditionals.html"><span class="header-section-number">3</span> Conditionals</a></li>
<li><a class="" href="lists.html"><span class="header-section-number">4</span> Lists</a></li>
<li><a class="" href="loops.html"><span class="header-section-number">5</span> Loops</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">6</span> Functions</a></li>
<li><a class="" href="data.html"><span class="header-section-number">7</span> Working with data</a></li>
<li><a class="active" href="interaction.html"><span class="header-section-number">8</span> Interaction</a></li>
<li><a class="" href="solutions.html"><span class="header-section-number">9</span> Solutions</a></li>
<li><a class="" href="debugging-and-good-programming-practices.html"><span class="header-section-number">10</span> Debugging and good programming practices</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="interaction" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Interaction<a class="anchor" aria-label="anchor" href="#interaction"><i class="fas fa-link"></i></a>
</h1>
<p>When you decided to learn programming you probably had something different in mind than putting some values in variables or compare apple with pears in conditionals. Most likely, your were more thinking of creating something with a little more magic then ASCII letters printed to the console. Perhaps, you already have an idea for a smartphone app on your mind. Who hasn’t?</p>
<p>We won’t push you that far. But, with conditionals in your hand, you are prepared to get to the next level and develop <em>interactive programs</em> Interactive programs are those that run continuously and do something when the user presses a button or moves and clicks the mouse. They don’t do something completely random, except for some artistic installations, perhaps, but react in a purposeful way to user input. We can say, that a program executes an <em>interaction model</em>, a set of rules that describe the programs behaviour. Then we show you how to write interactive programs very efficiently by turning the transition table into <em>transitionals</em>.</p>
<p>In this chapter we do more than just show you how to use a conditional or a loop. You will notice that writing an interactive program is more than just coding. It is a <em>development process</em> with a sequence of steps where the output of one step is input for the next.</p>
<pre><code>    Your brain does              The result is
    [Interaction modelling]  --&gt; Transition table 
--&gt; [Coding transitionals]   --&gt; Interactive prototype
--&gt; [Coding presentationals] --&gt; Pygame program.</code></pre>
<p>First, we will teach you how to analyze an interaction problem and note down your ideas in a structured way, a <em>transition table</em>. Then we’ll show you how to implement a prototype for testing the interaction protocol by turning the transition table into <em>transitionals</em>. Finally, we’ll explain in more detail how to put the elements of interaction together in Pygame and give them a fluent appearance.</p>
<div id="interaction-models" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> Interaction models<a class="anchor" aria-label="anchor" href="#interaction-models"><i class="fas fa-link"></i></a>
</h2>
<p>An interaction model describes when the program does what. As simple as this definition is, making an interaction model is not. Rather, creating this model is an important part of sincere software development and happens long before you start coding. In essence, when starting to work on an interactive program, the first you do is: switch off your computer, pull out pencils and paper and scratch your head.</p>
<p>What we are asking you to do is envisioning the program you are going to write, eventually. The formal output of the interaction analysis is just one table that somewhat abstractly describes the flow of the program. That does not mean, that during the analysis you may do use other representations, such as flow charts or screen scribbles. The opposite is the case: seeing your program from different angles, will help you to come up with a better interaction model and the results can be used downstream, such as screen scribbles for the visual design.</p>
<p>As complex it is, an interaction model can be broken down into three sets of elements: states, transitions and events:</p>
<ul>
<li>states are the different modes a program is in.</li>
<li>transitions let the program move from one state to another</li>
<li>events make these transitions happen</li>
</ul>
<p>The scope of this book covers rather simple interactive programs only, psychological experiments. In order to explain the basics of interaction programming, we go for something even more simple: a Dutch traffic light.</p>
<div id="identifying-states" class="section level3" number="8.1.1">
<h3>
<span class="header-section-number">8.1.1</span> Identifying states<a class="anchor" aria-label="anchor" href="#identifying-states"><i class="fas fa-link"></i></a>
</h3>
<p>The first step in the analysis is to <em>identify states</em> of the program. A state is a rather abstract term, so let’s see a few examples:</p>
<ul>
<li>a light switch has the two states On and Off</li>
<li>the Dutch traffic light has the three signals Go, Attention and Stop</li>
<li>In MS Word, there are several different modes to view a document: Read, Print, Web.</li>
<li>…</li>
</ul>
<p>If you are making a model of an existing system in front of your eyes, that’s called <em>reverse engineering</em>. One good heuristic to reverse engineer states is to simply observe the different visual forms the display takes. Then, the states are exmained further and are given a description and a label. So, let’s reverse engineer the Dutch traffic light by watching one cycle of signals:</p>
<p>Here are the three displays of the traffic light:</p>
<pre><code>.    .    R
.    Y    .
G    .    .</code></pre>
<p>Then we capture the purpose of state and give it What we have to capture in the first place in our analysis is the <em>purpose of states</em>. and this we note this down in a <em>table of states (TOS)</em>:</p>
<pre><code>## # A tibble: 3 x 2
##   State Purpose                   
##   &lt;chr&gt; &lt;chr&gt;                     
## 1 Go    signal permission to cross
## 2 Att   signal soon Stop          
## 3 Stop  No permission to cross</code></pre>
<p>Notice how we named the states of the traffic light, or better how we did not call them Green, Yellow and Red. Why, because colored lamps are just one medium for the signal. The description of the state should address the purpose of the state and not its appearance. When doing the analysis, rather than thinking of lamps and buzzers, think of what the user will understans. Visual design comes at a later point in the development process.</p>
</div>
<div id="identifying-transitions" class="section level3" number="8.1.2">
<h3>
<span class="header-section-number">8.1.2</span> Identifying transitions<a class="anchor" aria-label="anchor" href="#identifying-transitions"><i class="fas fa-link"></i></a>
</h3>
<p>The second step in the analysis is about identifying the <em>transitions</em> between states. The Dutch traffic light knows three transitions:</p>
<div id="htmlwidget-8aa6ec4d6a09ac960545" style="width:672px;height:480px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-8aa6ec4d6a09ac960545">{"x":{"diagram":"graph LR\n         Go   --> Att\n         Att  --> Stop\n         Stop --> Go"},"evals":[],"jsHooks":[]}</script><p>Cycling through a set of states is the most simple interaction protocol. It is unique, in that states are arrenged in a closed cycle, which implies that every state appears exactly once on the left-hand side (the original state) and the right-hand side (the destination). As we will later see, this is why we also only need one button for a manual traffic light.</p>
<p>Most of the time it is more complicated and state charts can easily go out-of-hand. We now introduce the method of <em>transition tables</em>, which breaks down the complex analysis into a series of simple questions. All we know afterthe state analysis is the set of states and that, potentially, every state can change into every other. We put this into a square matrix of states. The rows denote the <em>origin</em> state, the columns are <em>target</em> states.</p>
<pre><code>      Go  Att Stop
Go
Att
Stop</code></pre>
<p>According to the empty transition table, the traffic light has nine possible transitions. But which of them make any sense and should be implemented? We start in the first row and ask: “Does it make sense that a state Go is followed by itself?” Here, the answer is No and you leave the cell just empty. But, there are situations, where you would want to make such a “selfish” transition, think of a dia show program, that, whenever a button is pressed, shows the next picture. The state Show_picture is followed by Show_picture. That also implies, that states can be somewhat abstract. It would make little sense to have a separate state defined for every picture in the show.</p>
<pre><code>         Welcome  Present Goodbye
Welcome           X
Present           X       X
Goodbye  </code></pre>
<p>Let’s move on: “Does a transition from Go to Att make sense?” Absolutely! You make a cross. Then you do the same for the second and the third row, leaving blank the impossble transitions and marking the possible.</p>
<pre><code>      Go  Att Stop
Go          X
Att             X
Stop  X</code></pre>
<p>It is important to understand, that transitions are not symmetric. In the case of a traffic light, you can go from Go to Att, but there is no transition back. In interaction models other than a uni-directional cycle, transitions can well be symmetric, think of the checkout process on webshops. Usually, they guide you through the process in a number of steps (billing address –&gt; delivery address, credit card number), but allow you to go back to the previous step to do corrections.</p>
<div id="htmlwidget-5cf1c08074875de101d9" style="width:672px;height:192px;" class="DiagrammeR html-widget"></div>
<script type="application/json" data-for="htmlwidget-5cf1c08074875de101d9">{"x":{"diagram":"graph LR\n    Delivery    --> Billing\n    Billing    --> Credit_card\n    Credit_card --> Billing\n    Billing     --> Delivery"},"evals":[],"jsHooks":[]}</script><pre><code>             Delivery  Billing Credit_card
Delivery               x
Billing      x                 x
Credit_card            x       </code></pre>
<!-- #5 specify initial state -->
<p>Notice that in the traffic light example, every state is origin of exactly one transition, whereas in the checkout process there are two transitions originating at Billing. This is called <em>branching</em>. If you wonder how the program eventually decides which transition to take, read on about events.</p>
</div>
<div id="events-user-input-and-internal-conditions" class="section level3" number="8.1.3">
<h3>
<span class="header-section-number">8.1.3</span> Events: user input and internal conditions<a class="anchor" aria-label="anchor" href="#events-user-input-and-internal-conditions"><i class="fas fa-link"></i></a>
</h3>
<p>The transition table tells you which of the possible transitions are allowed and should be implemented. It does not yet tell you when this is going to happen, exactly. An <em>event</em> is a condition that triggers a transitions. Events can be internal conditions or user input.</p>
<p><em>Internal conditions</em> do not require user input. The program decides solely by itself, when to transit. This is why we call transitions on internal conditions <em>automatic transitions</em>. A typical case of automatic transitions is control by a timer. If we assume that the Dutch traffic light runs automatically, without someone standing next to it (in a yellow vest) and pushing buttons, all transitions must be automatic. Certainly, we do not want the traffic light to change states instantly, but only after a certain time has passed. For the interaction model that means we have to specify the resting time in every state. We do that right on the transition table by replacing the crosses with a brief description of the condition that makes the system leave the origin state:</p>
<pre><code>      Go  Att   Stop
Go        20s
Att             5s
Stop  20s</code></pre>
<p>In words, the interaction model is expressed like the following:</p>
<ol style="list-style-type: decimal">
<li>When in state Go, wait 20s, then transit to Att</li>
<li>When in Att, wait 5s, then transit to Stop</li>
<li>When in Stop, wait 20s, then transit to Go</li>
</ol>
<p>In psychological experiments, such time-controlled transitions happen a lot. The purpose of some experiments is to investigate subliminal priming, where presnetation time is so short, that people cannot consciously process the stimuls, but there still are subconscious effects. For example, when very briefly seeing a picture of an apple, participants reportedly react faster to the question: “Is this a word? PEAR.” In subliminal primning experiments, in order to control cognitive processing time, stimuli are presented for a very brief moment, followed by a visual mask (to erase visual sensory memory). Finally, the response is acquired as a key press (which is user input) and the program proceeds to the next trial.</p>
<pre><code>      Stim  Mask   Resp
Stim        100ms
Mask               100ms
Resp  X</code></pre>
<p>That brings us to the second form of events: <em>user input</em> events. A transition that is triggered by user input is called an interactive transition. Only if there is at least one interactive transition, will we call it an interactive program. In most cases, user input is just pressing a certain key. Let’s first look at how a manual traffic light can be specified. Taking another look at the transition table tells us:</p>
<ul>
<li>there are three possible transitions</li>
<li>at every origin state there is only one transition possible</li>
</ul>
<p>Because there is only one transition possible at every moment, it seems we can go with just one key, let’s call it Next.</p>
<pre><code>      Go  Att   Stop
Go        Next
Att             Next
Stop  Next</code></pre>
<p>In this case, it seems fairly practical to give the traffic light operator a remote control with just one button. But note that for more complex systems that is not a good idea in terms of usability. Why? Because of what is known as mode confusion. The ideal example probably is one of these 1980 clunky digital watches, which not just told you the time, but also let you use stop watches, timers, altitude alarms, step counters and brewing a nice cup of coffee. And all that functionality is controlled by just four flimsy buttons. What these buttons do, changes with the state the watch is in. For example, the lower left button could switch to another time zone in Watch, but do a reset in stop watch mode. The user has to learn from the manual what every button does in every state and has to be completely aware which mode the watch currently is in.</p>
<p>When desgning more complex interactions it is therefore better to use different user inputs (keys presses) for different actions. That does not mean you have to use a totally new control for every cell in the transition table. There can be actions that are very similar across states, such as an action Next or Previous in the checkout process example:</p>
<pre><code>             Delivery  Billing     Credit_card
Delivery               Next
Billing      Previous              Next
Credit_card            Previous</code></pre>
<p>Note that we keep the name of the controls rather abstract, denoting the action, not the physical key or mouse button. Like with the analysis of states, we defer the peoblem to a later state. The reason is to not get distracted at this stage, but also it makes the transition table easier to read, and let’s us identify actions that could use the same control. How many controls you finally use in your program is a matter of careful choice. However, there is at least one rule: The number of separate controls must be equal to or larger than the maximum number of interactive transitions in any row. According to this rule, the traffic light can have one or more controls, whereas the checkout program requires at least two (Billing).</p>
<p>In the checkout and traffic light examples, there is only one transition per state, but of course, there can be more than one. In the subliminal priming example, the participant’s response is whether the shown letter combination is a word, or not. That implies that two controls are needed at that transitions, say the controls Word and Not_word. As the program will continue to state Stim, irrespectively of which of the two keys have been pressed.</p>
<pre><code>      Stim       Mask   Resp
Stim             100ms
Mask                    100ms
Resp  Word or
      Not_word</code></pre>
<p>This needs to be considered carefully, because if you end up putting two controls in the same cell it could be that you have not yet discovered all states. In the subliminal priming example, Resp is followed by Stim, irrespectively of user input. But, that is a special case.</p>
<p>The transition table is now complete. It covers states (in rows and columns), transitions (occupied cells) and events (what is in the cell). In the next section, we will build interactive programs by translating each cell in the table into a <em>transition conditional</em>.</p>
</div>
<div id="exercises-7" class="section level3" number="8.1.4">
<h3>
<span class="header-section-number">8.1.4</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-7"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>german traffic lights differ from Dutch traffic lights in that they light Red and Yellow before switching to Go. Create a transition table.</li>
<li>Identify states, events and transitions of a stopwatch program and create a transition table.</li>
<li>A smart traffic light switches from Stop to Go automatically, when a car is approaching and the crossroads are clear. Analyze and create a transition table.</li>
<li>Review the Stroop program and find the states in the code. Then, take a closer look at where in the code states are used.</li>
</ol>
<!-- 7 rewrite

it down do a good analysis and break it down in manageable pieces. That  in this chapter we will To In this chapter, we are doing real software development, which is more than just coding.

In essence, this chapter is more than just coding, it introduces a basic, but systematic software development process.

Just imagine, With a little more experience, a transition table is easily translated into a Pygame 
program, but there is a lot of clutter, too. For that purpose we proceed by writing a prototype for the console, that has 
STATE = "Billing"the sole purpose of checking whether your interaction model does what you intended. -->
</div>
</div>
<div id="programming-interactive-prototypes" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> Programming interactive prototypes<a class="anchor" aria-label="anchor" href="#programming-interactive-prototypes"><i class="fas fa-link"></i></a>
</h2>
<p>One of the worst things that can happen in software development is that a flaw that has been introduced during an early state of planning is discovered when the program is almost done. For that reason, it is good practice in software development to test models and catch flaws as early as possible. So, how can we test our interaction model? Of course, we could just implement the whole program and then see, if it does what was intended. But, if there truly are flaws, a lot of effort would have been wasted and a lot of work had to be redone. This catch-22 situation can be resolved by implementing just the aspect of the system that you want to test, for example the flow of interaction. This is called a <em>prototype</em> and, as you will see, the transition table can quickly be translated into a simple piece of software, an <em>interactive prototype</em>, using just a few standard coding patterns.</p>
<p>For the interactive prototype, we will turn the transitions from the table into <em>transition conditionals</em> or short: <em>transitionals</em>. As we have two kinds of transitions, automatic and interactive, we will also have to deal with interactive and automatic transitionals.</p>
<div id="interactive-transitionals" class="section level3" number="8.2.1">
<h3>
<span class="header-section-number">8.2.1</span> Interactive transitionals<a class="anchor" aria-label="anchor" href="#interactive-transitionals"><i class="fas fa-link"></i></a>
</h3>
<p>The following code snippet implements two interactive transitional with the same origin, namely the transition from Billing to Delivery and Credit_card:</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb455-1"><a href="interaction.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(STATE)</span>
<span id="cb455-2"><a href="interaction.html#cb455-2" aria-hidden="true" tabindex="-1"></a>key <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Press a key: "</span>)</span>
<span id="cb455-3"><a href="interaction.html#cb455-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-4"><a href="interaction.html#cb455-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb455-5"><a href="interaction.html#cb455-5" aria-hidden="true" tabindex="-1"></a>  STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb455-6"><a href="interaction.html#cb455-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-7"><a href="interaction.html#cb455-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb455-8"><a href="interaction.html#cb455-8" aria-hidden="true" tabindex="-1"></a>  STATE <span class="op">=</span> <span class="st">"Credit_card"</span></span></code></pre></div>
<p>Notice that</p>
<ol style="list-style-type: decimal">
<li>the state of a program is maintained as a plain String variable</li>
<li>the starting state is set as “Billing”</li>
<li>interactive transitionals check for two conditions: current state and whether the respective key has been pressed</li>
<li>a transition occurs by setting the variable <code>STATE</code> to another value</li>
</ol>
<p>The above code will only ask for user input once, change the state (or stay in Billing, if no valid input was entered) and terminate. Instead, we want this program to truly flow and be able to react on longer series of user actions. Basically, the only thing we have to do is put the transitionals into a loop. However, in this particular case, what would happen is that the program would never truly stop. For that purpose, we implement a general state called Exit, that ends the program. The transitions of Exit are special, in that this state always is the destination, never the origin. This is why we can omit the row. In many cases you also want to respect the users freedom and allow them to jump to Exit at any time they want:</p>
<pre><code>             Delivery  Billing     Credit_card  Exit
Delivery               Next                     X
Billing      Previous              Next         X
Credit_card            Previous                 X, Next</code></pre>
<p>The interaction prototype of Checkout looks like the following.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb457-1"><a href="interaction.html#cb457-1" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb457-2"><a href="interaction.html#cb457-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb457-3"><a href="interaction.html#cb457-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb457-4"><a href="interaction.html#cb457-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(STATE)</span>
<span id="cb457-5"><a href="interaction.html#cb457-5" aria-hidden="true" tabindex="-1"></a>  key <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Press a key: "</span>)</span>
<span id="cb457-6"><a href="interaction.html#cb457-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb457-7"><a href="interaction.html#cb457-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># interactive transitionals</span></span>
<span id="cb457-8"><a href="interaction.html#cb457-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb457-9"><a href="interaction.html#cb457-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Delivery"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb457-10"><a href="interaction.html#cb457-10" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Billing"</span></span>
<span id="cb457-11"><a href="interaction.html#cb457-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb457-12"><a href="interaction.html#cb457-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb457-13"><a href="interaction.html#cb457-13" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb457-14"><a href="interaction.html#cb457-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb457-15"><a href="interaction.html#cb457-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb457-16"><a href="interaction.html#cb457-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb457-17"><a href="interaction.html#cb457-17" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Credit_card"</span></span>
<span id="cb457-18"><a href="interaction.html#cb457-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb457-19"><a href="interaction.html#cb457-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Credit_card"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb457-20"><a href="interaction.html#cb457-20" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Billing"</span></span>
<span id="cb457-21"><a href="interaction.html#cb457-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb457-22"><a href="interaction.html#cb457-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb457-23"><a href="interaction.html#cb457-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Credit_card"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb457-24"><a href="interaction.html#cb457-24" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Exit"</span></span>
<span id="cb457-25"><a href="interaction.html#cb457-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb457-26"><a href="interaction.html#cb457-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb457-27"><a href="interaction.html#cb457-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> key <span class="op">==</span> <span class="st">"x"</span>:</span>
<span id="cb457-28"><a href="interaction.html#cb457-28" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Exit"</span></span>
<span id="cb457-29"><a href="interaction.html#cb457-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb457-30"><a href="interaction.html#cb457-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb457-31"><a href="interaction.html#cb457-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Exit"</span>:</span>
<span id="cb457-32"><a href="interaction.html#cb457-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb457-33"><a href="interaction.html#cb457-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb457-34"><a href="interaction.html#cb457-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb457-35"><a href="interaction.html#cb457-35" aria-hidden="true" tabindex="-1"></a>exit()</span></code></pre></div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>the loop itself comes with no conditions itself. It just plainly loops, until someone proves that the truth is not true.</li>
<li>the print statement at the top of the while loop entirely replaces the graphical user interface at this stage.</li>
<li>after every transitional, we have put a <code>continue</code> statement. Why? Because, when the State veriable is updated, it can fire up a second transitional. Check yourself, by reading the conditionals: within one iteration we would go from Delivery to Exit all the way through and we would not even see the intermediate steps printed to the console. The <code>continue</code> statement forces the loop to begin a new iteration, immediatly, omitting all the transitionals after the one that has fired. That makes sure that per iteration no more than one state transition takes place.</li>
<li>We use a transitional that does not ask for the state and therefore always triggers Exit when x is pressed</li>
<li>the Credit_card –&gt; Exit transitional uses <code>continue</code> in order to reach the <code>print(STATE)</code> command one more time. During that final iteration only, the last transitional (the one without destination) is encountered and the <code><a href="https://rdrr.io/r/base/Control.html">break</a></code> statement ends the loop.</li>
</ol>
<p>In general, interactive transitional emerge from the transition table by the following pattern:</p>
<pre><code>if STATE == &lt;origin&gt; and &lt;event&gt;:
  STATE = &lt;state&gt;
  continue</code></pre>
<p>Notice that every combination of state and event gets its own <code>if ... continue</code> block. We call this <em>flat transitionals</em>. Another way is to use <em>nested transitionals</em>, which have an an outer <code>if</code> block to interrogate the state and uses the inner <code>if</code> block to deal with all possible events, The general form is:</p>
<pre><code>if STATE == &lt;origin&gt;:
  if   &lt;event_1&gt;:
    STATE = &lt;next_state_1&gt;
  elif &lt;event_2&gt;:
    STATE = &lt;next_state_2&gt;
  elif ...
  continue</code></pre>
<p>There is no difference in functionality between these two forms of transitionals, but for longer programs it may be easier to read. With nested transitionals, the checkout program would look like the following:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb460-1"><a href="interaction.html#cb460-1" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb460-2"><a href="interaction.html#cb460-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb460-3"><a href="interaction.html#cb460-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb460-4"><a href="interaction.html#cb460-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(STATE)</span>
<span id="cb460-5"><a href="interaction.html#cb460-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb460-6"><a href="interaction.html#cb460-6" aria-hidden="true" tabindex="-1"></a>  key <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Press a key: "</span>)</span>
<span id="cb460-7"><a href="interaction.html#cb460-7" aria-hidden="true" tabindex="-1"></a><span class="co"># interactive transitionals</span></span>
<span id="cb460-8"><a href="interaction.html#cb460-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Delivery"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb460-9"><a href="interaction.html#cb460-9" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Billing"</span></span>
<span id="cb460-10"><a href="interaction.html#cb460-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb460-11"><a href="interaction.html#cb460-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb460-12"><a href="interaction.html#cb460-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span>:</span>
<span id="cb460-13"><a href="interaction.html#cb460-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb460-14"><a href="interaction.html#cb460-14" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Credit_card"</span></span>
<span id="cb460-15"><a href="interaction.html#cb460-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb460-16"><a href="interaction.html#cb460-16" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb460-17"><a href="interaction.html#cb460-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb460-18"><a href="interaction.html#cb460-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Credit_card"</span>:</span>
<span id="cb460-19"><a href="interaction.html#cb460-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb460-20"><a href="interaction.html#cb460-20" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Exit"</span></span>
<span id="cb460-21"><a href="interaction.html#cb460-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb460-22"><a href="interaction.html#cb460-22" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Billing"</span></span>
<span id="cb460-23"><a href="interaction.html#cb460-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb460-24"><a href="interaction.html#cb460-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb460-25"><a href="interaction.html#cb460-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Exit"</span>:</span>
<span id="cb460-26"><a href="interaction.html#cb460-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span></code></pre></div>
<p>Notice that</p>
<ol style="list-style-type: decimal">
<li>the indentation visually groups all transitions that belong to the same origin state</li>
<li>we reduced the number of <code>continue</code> statements. As <code>key</code> is never changed inside a transitional, only a single event conditional is triggered at a time.</li>
</ol>
</div>
<div id="automatic-transitions" class="section level3" number="8.2.2">
<h3>
<span class="header-section-number">8.2.2</span> Automatic transitions<a class="anchor" aria-label="anchor" href="#automatic-transitions"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes we want a transition to happen due to internal conditions of the program, for example:</p>
<ul>
<li>stay in state Att, when 5 seconds have passed move on to Stop</li>
<li>show the stimulus for 100ms, then move on to the distraction mask.</li>
<li>after 20 trials of an experiment, make a pause.</li>
<li>after all dias have been shown, give a Goodbye</li>
</ul>
<p>A frequent case of automatic transitions is staying in a state for a certain amount of time, then move on to the next state. Take as an example a dia show program that automatically shows every picture for, say, 30 seconds. Fortunately, automatic transitions almost look the same, the only difference being that <code>&lt;event&gt;</code> becomes <code>&lt;condition&gt;</code>.</p>
<p>As you have experienced at the Stroop task theater play from chapter <a href="intro.html#intro">1</a> dealing with time requires some extra tricks. For example, how do we let the automatic traffic light rest in the Go state for exactly 20 seconds? We set a timestamp and wait for the difference to become 20 seconds or longer. Fortunately, for interaction prototypes, there is a cheap and dirty trick to do that more straight-forwardly, which is the command <code>sleep(20)</code>. It suspends the whole program and wakes it up after twenty seconds. Why is that dirty? For two reasons: First, it only works for interaction prototypes, but not Pygame programs. For example, when you are showing animated stimuli, putting the whole program on halt won’t work. Second, you will not be able to bypass the waiting time, say, the user wants to prematurely proceed to the next picture in the dia show.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb461-1"><a href="interaction.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> sleep</span>
<span id="cb461-2"><a href="interaction.html#cb461-2" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"Stop"</span> <span class="co"># Att, Go</span></span>
<span id="cb461-3"><a href="interaction.html#cb461-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb461-4"><a href="interaction.html#cb461-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(STATE)</span>
<span id="cb461-5"><a href="interaction.html#cb461-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Go"</span>:</span>
<span id="cb461-6"><a href="interaction.html#cb461-6" aria-hidden="true" tabindex="-1"></a>      sleep(<span class="dv">2</span>)</span>
<span id="cb461-7"><a href="interaction.html#cb461-7" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Att"</span></span>
<span id="cb461-8"><a href="interaction.html#cb461-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb461-9"><a href="interaction.html#cb461-9" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb461-10"><a href="interaction.html#cb461-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Att"</span>:</span>
<span id="cb461-11"><a href="interaction.html#cb461-11" aria-hidden="true" tabindex="-1"></a>      sleep(<span class="dv">1</span>)</span>
<span id="cb461-12"><a href="interaction.html#cb461-12" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Stop"</span></span>
<span id="cb461-13"><a href="interaction.html#cb461-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb461-14"><a href="interaction.html#cb461-14" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb461-15"><a href="interaction.html#cb461-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Stop"</span>:</span>
<span id="cb461-16"><a href="interaction.html#cb461-16" aria-hidden="true" tabindex="-1"></a>      sleep(<span class="dv">2</span>)</span>
<span id="cb461-17"><a href="interaction.html#cb461-17" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Go"</span></span>
<span id="cb461-18"><a href="interaction.html#cb461-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span></code></pre></div>
<p>A program can be (and typically is) a mix of interactive and automatic transitionals. For example, we could create a semi-automatic traffic light, where the operator only has to switch Stop and Go. When set to Stop, the program first goes to state Att, rests there for a few seconds and than automatically moves on to Stop.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb462-1"><a href="interaction.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> sleep</span>
<span id="cb462-2"><a href="interaction.html#cb462-2" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"Stop"</span> <span class="co"># Att, Go</span></span>
<span id="cb462-3"><a href="interaction.html#cb462-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb462-4"><a href="interaction.html#cb462-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(STATE)</span>
<span id="cb462-5"><a href="interaction.html#cb462-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Go"</span>:</span>
<span id="cb462-6"><a href="interaction.html#cb462-6" aria-hidden="true" tabindex="-1"></a>      <span class="bu">input</span>(<span class="st">"Hit Return"</span>)</span>
<span id="cb462-7"><a href="interaction.html#cb462-7" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Att"</span></span>
<span id="cb462-8"><a href="interaction.html#cb462-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb462-9"><a href="interaction.html#cb462-9" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb462-10"><a href="interaction.html#cb462-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Att"</span>:</span>
<span id="cb462-11"><a href="interaction.html#cb462-11" aria-hidden="true" tabindex="-1"></a>      sleep(<span class="dv">2</span>)</span>
<span id="cb462-12"><a href="interaction.html#cb462-12" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Stop"</span></span>
<span id="cb462-13"><a href="interaction.html#cb462-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb462-14"><a href="interaction.html#cb462-14" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb462-15"><a href="interaction.html#cb462-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Stop"</span>:</span>
<span id="cb462-16"><a href="interaction.html#cb462-16" aria-hidden="true" tabindex="-1"></a>      <span class="bu">input</span>(<span class="st">"Hit Return"</span>)</span>
<span id="cb462-17"><a href="interaction.html#cb462-17" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Go"</span></span>
<span id="cb462-18"><a href="interaction.html#cb462-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span></code></pre></div>
<p>Notice that</p>
<ol style="list-style-type: decimal">
<li>the <code>input</code> commands moved into the transitionals as otherwise the loop would prompt for input for automatic transitions, as well, which is just not the idea. Later, we will use the event handling mechanism of Pygame, which will provide a better solution for mixing interactive and automatic transitionals.</li>
<li>we have simplified the event handling. This traffic light needs just one control button to toggle Stop and Go, which here is any key (followed by Return) or just the Return key. That is not a general solution, but only works, because there is just one transition per state.</li>
</ol>
</div>
<div id="the-timestamp-method" class="section level3" number="8.2.3">
<h3>
<span class="header-section-number">8.2.3</span> The timestamp method<a class="anchor" aria-label="anchor" href="#the-timestamp-method"><i class="fas fa-link"></i></a>
</h3>
<p>As we have said, for a prototype, the <code>sleep(s)</code> is fine in most cases to cause a delayed reaction, but not when we start coding with Pygame. Then we have to use the timestamp method, which has little benefits for interactive prototypes. Still, it seems in order to introduce this method on the somewhat cleaner code of the interactive prototypes.</p>
<p>The following code shows, how to implement a time delay by setting a timestamp and comparing the difference with current time in the automatic traffic light example.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb463-1"><a href="interaction.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> time</span>
<span id="cb463-2"><a href="interaction.html#cb463-2" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"Go"</span> <span class="co"># Att, Go</span></span>
<span id="cb463-3"><a href="interaction.html#cb463-3" aria-hidden="true" tabindex="-1"></a>time_stamp <span class="op">=</span> time()</span>
<span id="cb463-4"><a href="interaction.html#cb463-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb463-5"><a href="interaction.html#cb463-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb463-6"><a href="interaction.html#cb463-6" aria-hidden="true" tabindex="-1"></a>    current_time <span class="op">=</span> time()</span>
<span id="cb463-7"><a href="interaction.html#cb463-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb463-8"><a href="interaction.html#cb463-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Go"</span> <span class="kw">and</span> current_time <span class="op">-</span> time_stamp <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb463-9"><a href="interaction.html#cb463-9" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Att"</span></span>
<span id="cb463-10"><a href="interaction.html#cb463-10" aria-hidden="true" tabindex="-1"></a>      time_stamp <span class="op">=</span> time()</span>
<span id="cb463-11"><a href="interaction.html#cb463-11" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(STATE)</span>
<span id="cb463-12"><a href="interaction.html#cb463-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb463-13"><a href="interaction.html#cb463-13" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb463-14"><a href="interaction.html#cb463-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Att"</span> <span class="kw">and</span> current_time <span class="op">-</span> time_stamp <span class="op">&gt;=</span> <span class="dv">1</span>:</span>
<span id="cb463-15"><a href="interaction.html#cb463-15" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Stop"</span></span>
<span id="cb463-16"><a href="interaction.html#cb463-16" aria-hidden="true" tabindex="-1"></a>      time_stamp <span class="op">=</span> time()</span>
<span id="cb463-17"><a href="interaction.html#cb463-17" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(STATE)</span>
<span id="cb463-18"><a href="interaction.html#cb463-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span>
<span id="cb463-19"><a href="interaction.html#cb463-19" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb463-20"><a href="interaction.html#cb463-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Stop"</span> <span class="kw">and</span> current_time <span class="op">-</span> time_stamp <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb463-21"><a href="interaction.html#cb463-21" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Go"</span></span>
<span id="cb463-22"><a href="interaction.html#cb463-22" aria-hidden="true" tabindex="-1"></a>      time_stamp <span class="op">=</span> time()</span>
<span id="cb463-23"><a href="interaction.html#cb463-23" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(STATE)</span>
<span id="cb463-24"><a href="interaction.html#cb463-24" aria-hidden="true" tabindex="-1"></a>      <span class="cf">continue</span></span></code></pre></div>
<p>Notice that</p>
<ul>
<li>the second condition of time-controlled transitionals carries the waiting time</li>
<li>the function <code><a href="https://rdrr.io/r/stats/time.html">time()</a></code> returns the number of seconds since 1 January 1970. That is called the Unix epoch.</li>
<li>because the starting state Go is time-controlled, we have to set a first timestamp before the <code>while</code> loop starts.</li>
<li>the print statements have been moved into the transitionals. Read more on that below.</li>
<li>
<code>current_time</code> is set once at the beginning of every iteration. Read more on that below.</li>
</ul>
<p>It appears as if going from the <code>sleep</code> method to the <code>time</code> method is just some superficial change in code. In fact, there is one dramatic change once the program runs, although you may not even realize it on the first glance. With <code>sleep</code>, the <code>while</code> loop does exactly one iteration per state change, that is one per five seconds (combined sleeping time). When entering a transitional, the sleep is initiated and the program rests. Then it wakes up and finds the <code>continue</code>, eventually. In the timestamp version, the program never sleeps. The while loop cycles as fast as it can, which is incredibly fast, at every iteration picking up <code>current_time</code> and comparing it to the timestamp. Find out yourself, by putting the <code>print(STATE)</code> back to its old place, at the top of the loop.</p>
<p>We will use the exact same method in Pygame. But, here it is, why the method does not work well with the prototype. The system we have chosen was the traffic light. That was on full purpose as it is fully automatic. The problem is the <code>input</code> command, as it waits for input. While it does, the loop stands still. In order to combine user input with a fast while loop, we would need another way of handling input events. That is what Pygame will provide.</p>
<!--
### Continuous event handling

With the time stamp method we can write our prototype in a way that comes closer to the final Pygame program, which also has a fast paced `while` loop to make for a fluent user interface. Another advantage of the time stamp method is that we can react to input while we wait. An example is 
-->
</div>
<div id="presentation-conditionals" class="section level3" number="8.2.4">
<h3>
<span class="header-section-number">8.2.4</span> Presentation conditionals<a class="anchor" aria-label="anchor" href="#presentation-conditionals"><i class="fas fa-link"></i></a>
</h3>
<p>If you inspect the interactive prototyping code so far, you will notice that all output is produced by a single <code>print</code> statement, which resides outside of the transitionals. That is fully on purpose, deriving from a golden rule of user interface development, as we will see later.</p>
<p>The sole purpose of a traffic light is to transit between states and make these states visible to the user In general, interactive programs do more than just transit from state to state. They usually process some sort of data or information. Very often, the user input at one state, affects the display of a subsequent state.</p>
<p>The one It suffices to check the interaction flow, but lacks the ability This is a very poor solution, as it only checks the primary state the program is in. In order to check the logic of the program it is useful to enrich tehz output further. For example, in the traffic light example, we may want to show the tr5affic light, not just its state.</p>
<p>It is tempting to just the print statements into the transitionals, but that will finally not work at all with Pygame programs. Recall what we said in the beginning of this chapter about breaking a complex problem into manageable pieces. In software development it is accepted best practice to clearly separate two aspects of an interactive program: the flow of states and the presentation on screen. There even is a name for this approach, its called a <em>two-tier architecture</em>. While this may seem over done at the toy examples, we use here, but it has significant advantages in the long run:</p>
<ul>
<li>You can focus on one thing at a time, typically starting with the flow of the program and once that is done, move on to screen design.</li>
<li>You can even separate the two tasks: one expert is doing the interaction flow, and another expert creates the screens.</li>
<li>It works with Pygame.</li>
</ul>
<p>In order to be more flexible with what the prototype presents to the screen when in a state, we will expand the <code>print(STATE)</code> statement into a set of <em>presentation conditionals (presentitionals)</em>, allowing us to create different output for different states. We demonstrate the idea by the example of the checkout process.</p>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>Presentationals <em>never</em> change the state as that is the domain of transitionals.</li>
<li>presentitionals are triggered by states, simply. If you find yourself wanting to add another condition, say whether the response was correct, that can either go into teh presentitional itself or you can split the state into two separate ones.<br>
</li>
<li>we use <code>if</code> statements without <code>continue</code>. If we would do otherwise, the iteration would jump over our carefully crafted transitionals and nothing will ever happen anymore. We also don’t need to break the iteration, because the program always is in exactly one state and the presetitionals never change state. That makes sure that exactly one presentitional will fire during a single iteration.</li>
<li>presentitionals come before transitionals, as otherwise they would fall prey to the <code>continue</code> statement and never show up. With Pygame, due to its better event handler mechanism, this is no longer necessary and it seems more logical to put presentitionals last.</li>
</ol>
<div class="sourceCode" id="cb464"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb464-1"><a href="interaction.html#cb464-1" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb464-2"><a href="interaction.html#cb464-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb464-3"><a href="interaction.html#cb464-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-4"><a href="interaction.html#cb464-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># presentation conditionals</span></span>
<span id="cb464-5"><a href="interaction.html#cb464-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-6"><a href="interaction.html#cb464-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span>:</span>
<span id="cb464-7"><a href="interaction.html#cb464-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"n for proceed"</span>)</span>
<span id="cb464-8"><a href="interaction.html#cb464-8" aria-hidden="true" tabindex="-1"></a>    billing  <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Please, enter your billing address"</span>)</span>
<span id="cb464-9"><a href="interaction.html#cb464-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-10"><a href="interaction.html#cb464-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Delivery"</span>:</span>
<span id="cb464-11"><a href="interaction.html#cb464-11" aria-hidden="true" tabindex="-1"></a>    delivery <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Please, enter your delivery address"</span>)</span>
<span id="cb464-12"><a href="interaction.html#cb464-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"p for previous, n for next"</span>)</span>
<span id="cb464-13"><a href="interaction.html#cb464-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-14"><a href="interaction.html#cb464-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Credit_card"</span>:</span>
<span id="cb464-15"><a href="interaction.html#cb464-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"n for next, p for previous"</span>)</span>
<span id="cb464-16"><a href="interaction.html#cb464-16" aria-hidden="true" tabindex="-1"></a>    credit_card  <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Please, enter your billing address"</span>)</span>
<span id="cb464-17"><a href="interaction.html#cb464-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-18"><a href="interaction.html#cb464-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Exit"</span>:</span>
<span id="cb464-19"><a href="interaction.html#cb464-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"We received your order"</span>)</span>
<span id="cb464-20"><a href="interaction.html#cb464-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb464-21"><a href="interaction.html#cb464-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb464-22"><a href="interaction.html#cb464-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-23"><a href="interaction.html#cb464-23" aria-hidden="true" tabindex="-1"></a>  key <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Press a key: "</span>)</span>
<span id="cb464-24"><a href="interaction.html#cb464-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># interactive transitionals</span></span>
<span id="cb464-25"><a href="interaction.html#cb464-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Delivery"</span> <span class="kw">and</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb464-26"><a href="interaction.html#cb464-26" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"Billing"</span></span>
<span id="cb464-27"><a href="interaction.html#cb464-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb464-28"><a href="interaction.html#cb464-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb464-29"><a href="interaction.html#cb464-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Billing"</span>:</span>
<span id="cb464-30"><a href="interaction.html#cb464-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb464-31"><a href="interaction.html#cb464-31" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Credit_card"</span></span>
<span id="cb464-32"><a href="interaction.html#cb464-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb464-33"><a href="interaction.html#cb464-33" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Delivery"</span></span>
<span id="cb464-34"><a href="interaction.html#cb464-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span>
<span id="cb464-35"><a href="interaction.html#cb464-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"Credit_card"</span>:</span>
<span id="cb464-36"><a href="interaction.html#cb464-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> key <span class="op">==</span> <span class="st">"n"</span>:</span>
<span id="cb464-37"><a href="interaction.html#cb464-37" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Exit"</span></span>
<span id="cb464-38"><a href="interaction.html#cb464-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> key <span class="op">==</span> <span class="st">"p"</span>:</span>
<span id="cb464-39"><a href="interaction.html#cb464-39" aria-hidden="true" tabindex="-1"></a>      STATE <span class="op">=</span> <span class="st">"Billing"</span></span>
<span id="cb464-40"><a href="interaction.html#cb464-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span></span></code></pre></div>
</div>
</div>
<div id="interactions-in-pygame" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> Interactions in Pygame<a class="anchor" aria-label="anchor" href="#interactions-in-pygame"><i class="fas fa-link"></i></a>
</h2>
<div id="overall-structure" class="section level3" number="8.3.1">
<h3>
<span class="header-section-number">8.3.1</span> Overall structure<a class="anchor" aria-label="anchor" href="#overall-structure"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb465"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb465-1"><a href="interaction.html#cb465-1" aria-hidden="true" tabindex="-1"></a>BACKGR_COL <span class="op">=</span> col_gray</span>
<span id="cb465-2"><a href="interaction.html#cb465-2" aria-hidden="true" tabindex="-1"></a>SCREEN_SIZE <span class="op">=</span> (<span class="dv">700</span>, <span class="dv">500</span>)</span>
<span id="cb465-3"><a href="interaction.html#cb465-3" aria-hidden="true" tabindex="-1"></a>pygame.init()</span>
<span id="cb465-4"><a href="interaction.html#cb465-4" aria-hidden="true" tabindex="-1"></a>pygame.display.set_mode(SCREEN_SIZE) </span>
<span id="cb465-5"><a href="interaction.html#cb465-5" aria-hidden="true" tabindex="-1"></a>pygame.display.set_caption(<span class="st">"Stroop Test"</span>)</span>
<span id="cb465-6"><a href="interaction.html#cb465-6" aria-hidden="true" tabindex="-1"></a>screen <span class="op">=</span> pygame.display.get_surface()</span>
<span id="cb465-7"><a href="interaction.html#cb465-7" aria-hidden="true" tabindex="-1"></a>font <span class="op">=</span> pygame.font.Font(<span class="va">None</span>, <span class="dv">80</span>)</span>
<span id="cb465-8"><a href="interaction.html#cb465-8" aria-hidden="true" tabindex="-1"></a>font_small <span class="op">=</span> pygame.font.Font(<span class="va">None</span>, <span class="dv">40</span>) </span>
<span id="cb465-9"><a href="interaction.html#cb465-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb465-10"><a href="interaction.html#cb465-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fast while loop</span></span>
<span id="cb465-11"><a href="interaction.html#cb465-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb465-12"><a href="interaction.html#cb465-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb465-13"><a href="interaction.html#cb465-13" aria-hidden="true" tabindex="-1"></a>          <span class="co"># refreshing the display</span></span>
<span id="cb465-14"><a href="interaction.html#cb465-14" aria-hidden="true" tabindex="-1"></a>          screen.fill(BACKGR_COL)        </span>
<span id="cb465-15"><a href="interaction.html#cb465-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb465-16"><a href="interaction.html#cb465-16" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Event loop</span></span>
<span id="cb465-17"><a href="interaction.html#cb465-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb465-18"><a href="interaction.html#cb465-18" aria-hidden="true" tabindex="-1"></a>              <span class="co"># interactive transitionals                     </span></span>
<span id="cb465-19"><a href="interaction.html#cb465-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb465-20"><a href="interaction.html#cb465-20" aria-hidden="true" tabindex="-1"></a>          <span class="co"># automatic transitionals</span></span>
<span id="cb465-21"><a href="interaction.html#cb465-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb465-22"><a href="interaction.html#cb465-22" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Presentitionals</span></span>
<span id="cb465-23"><a href="interaction.html#cb465-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb465-24"><a href="interaction.html#cb465-24" aria-hidden="true" tabindex="-1"></a>          <span class="co"># Updating the display</span></span>
<span id="cb465-25"><a href="interaction.html#cb465-25" aria-hidden="true" tabindex="-1"></a>          pygame.display.update()</span>
<span id="cb465-26"><a href="interaction.html#cb465-26" aria-hidden="true" tabindex="-1"></a>main()</span></code></pre></div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>The code for setting up the display looks complicated, but it usually suffices to just copy that part of the code whenever we start a new project. Still, you probably want to configure a few aspects to your requirements:
<ul>
<li>choose a background color, e.g. <code>col_black</code> or <code>#FFFFFF</code> (white)</li>
<li>set the width and height of the screen by changing <code>SCREEN_SIZE</code>
</li>
<li>change the caption of the screen (to appear in the top bar of the window)</li>
<li>change font and font size</li>
</ul>
</li>
<li>the main program is nbot invoked directly, but encapsulated in a function <code>def main():</code>. This function is then executed in the very last line of code.</li>
</ol>
</div>
<div id="the-screen-and-the-refresh-loop." class="section level3" number="8.3.2">
<h3>
<span class="header-section-number">8.3.2</span> The screen and the refresh loop.<a class="anchor" aria-label="anchor" href="#the-screen-and-the-refresh-loop."><i class="fas fa-link"></i></a>
</h3>
<p>With Pygame you can create interactive programs with fancy geometries and fluent animations. In fact, all computer animations are just pseudo-fluent. It is like in the movies: a fluent movement, like that of a jumping ball, is captured in a high speed. It is just a sequence of still images, but by the sluggish human visual system it is perceived no less fluent than the real scene.</p>
<p>In a Pygame program, an animation is created by a series of stills, too, with the only difference that these stills are not on celluloid. They get computed in an instance and transfered to the computer screen in fast succession, like 60 per second (60Hz). This happens as followed:</p>
<ol style="list-style-type: decimal">
<li>setting up the display</li>
<li>a fast while loop runs continuously, at every iteration:</li>
<li>the screen is refreshed by painting the background color over the previous image</li>
<li>the next image is computed by transitionals and presentitionals</li>
<li>the display is updated with the new image</li>
</ol>
<p>A single iteration of the fast while loop we call <em>a refresh</em>.</p>
</div>
<div id="handling-user-input" class="section level3" number="8.3.3">
<h3>
<span class="header-section-number">8.3.3</span> Handling user input<a class="anchor" aria-label="anchor" href="#handling-user-input"><i class="fas fa-link"></i></a>
</h3>
<p>With Pygame you can create interactive programs that react fluently to user input. There no longer is a prompt that waits for input and requires Return to continue. User input in Pygame programs is handled by a very clever mechanism called the <em>event handler queue</em>. You don’t actually see it, as it is set up behind the scenes by <code>pygame.init()</code>. It acts a lot like a descretive secretary: it stays in teh background and collects the incoming messages, hands them over one by one to the executive and lets her do her own thing with it.</p>
<p>While the fast <code>while</code> loop runs in the foreground, the event handler is a separate mechanism that continuously listens to input from keyboard or mouse. Whenever something happens, a key is pressed or the mouse is pushed, the event handler registers this event and puts it in a queue. At every regresh this queue is retrieved and emptied by <code>pygame.event.get()</code>, which returns the queue as a list. The event <code>for</code> loop iterates over this list, pulling out the events one by one out and handing them over to the interactive transitionals.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb466-1"><a href="interaction.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Event handler</span></span>
<span id="cb466-2"><a href="interaction.html#cb466-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> event <span class="kw">in</span> pygame.event.get(): </span>
<span id="cb466-3"><a href="interaction.html#cb466-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># interactive transitionals                     </span></span>
<span id="cb466-4"><a href="interaction.html#cb466-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"welcome"</span>:</span>
<span id="cb466-5"><a href="interaction.html#cb466-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="op">==</span> K_SPACE:</span>
<span id="cb466-6"><a href="interaction.html#cb466-6" aria-hidden="true" tabindex="-1"></a>            STATE <span class="op">=</span> <span class="st">"prepare_next_trial"</span></span>
<span id="cb466-7"><a href="interaction.html#cb466-7" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(STATE)</span>
<span id="cb466-8"><a href="interaction.html#cb466-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span></code></pre></div>
<p>Notice that</p>
<ol style="list-style-type: decimal">
<li>when there is no input, the event loop never runs and none of the interactive transitionals wil fire. The event handler loop acts like a conditional most of the time. It sits in the fast refresh loop and therefore is idle most of the iterations. That is why you should never put automatic transitionals into the event loop.</li>
<li>
<code>pygame.event.get()</code> returns the event queue, but also empties it. Otherwise, events would be eveluated over and over again.</li>
<li>an event is a complex piece of information. For a key press, the type of the event is <code>KEYDOWN</code> and it has a property key that holds the key that has been pressed.</li>
<li>if more than one event has been recorded, they are all being processed in a single refresh. That can mean more than one transition per refresh.</li>
<li>We still need <code>continue</code> to make sure that only one transitional per event is fired. While the event handler queue is consumed (emptied) by <code>pygame.event.get()</code>, the variable <code>event</code> is not. If two successive transitionals use the same event (e.g. n for next), they would both be triggered.</li>
</ol>
</div>
<div id="transitionals" class="section level3" number="8.3.4">
<h3>
<span class="header-section-number">8.3.4</span> Transitionals<a class="anchor" aria-label="anchor" href="#transitionals"><i class="fas fa-link"></i></a>
</h3>
<p>Interactive transitionals differ only slightly. Because of the event handler mechanism they no longer reside under the fast <code>while</code>, but one level deeper in the event handler loop. If you use a print statement to see the state transitions on the console, these must go into the individual transitionals, see yourself:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb467-1"><a href="interaction.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Event loop</span></span>
<span id="cb467-2"><a href="interaction.html#cb467-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb467-3"><a href="interaction.html#cb467-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb467-4"><a href="interaction.html#cb467-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># interactive transitionals                     </span></span>
<span id="cb467-5"><a href="interaction.html#cb467-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"welcome"</span>:</span>
<span id="cb467-6"><a href="interaction.html#cb467-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="op">==</span> K_SPACE:</span>
<span id="cb467-7"><a href="interaction.html#cb467-7" aria-hidden="true" tabindex="-1"></a>            STATE <span class="op">=</span> <span class="st">"prepare_next_trial"</span></span>
<span id="cb467-8"><a href="interaction.html#cb467-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(STATE)</span>
<span id="cb467-9"><a href="interaction.html#cb467-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb467-10"><a href="interaction.html#cb467-10" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb467-11"><a href="interaction.html#cb467-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"wait_for_response"</span>:</span>
<span id="cb467-12"><a href="interaction.html#cb467-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="kw">in</span> KEYS.values():</span>
<span id="cb467-13"><a href="interaction.html#cb467-13" aria-hidden="true" tabindex="-1"></a>            time_when_reacted <span class="op">=</span> time()</span>
<span id="cb467-14"><a href="interaction.html#cb467-14" aria-hidden="true" tabindex="-1"></a>            this_reaction_time <span class="op">=</span> time_when_reacted <span class="op">-</span> time_when_presented</span>
<span id="cb467-15"><a href="interaction.html#cb467-15" aria-hidden="true" tabindex="-1"></a>            this_correctness <span class="op">=</span> (event.key <span class="op">==</span> KEYS[this_color])</span>
<span id="cb467-16"><a href="interaction.html#cb467-16" aria-hidden="true" tabindex="-1"></a>            STATE <span class="op">=</span> <span class="st">"feedback"</span></span>
<span id="cb467-17"><a href="interaction.html#cb467-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(STATE)</span>
<span id="cb467-18"><a href="interaction.html#cb467-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb467-19"><a href="interaction.html#cb467-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"feedback"</span>:</span>
<span id="cb467-20"><a href="interaction.html#cb467-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="op">==</span> K_SPACE:</span>
<span id="cb467-21"><a href="interaction.html#cb467-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> trial_number <span class="op">&lt;</span> n_trials:</span>
<span id="cb467-22"><a href="interaction.html#cb467-22" aria-hidden="true" tabindex="-1"></a>                STATE <span class="op">=</span> <span class="st">"prepare_next_trial"</span></span>
<span id="cb467-23"><a href="interaction.html#cb467-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb467-24"><a href="interaction.html#cb467-24" aria-hidden="true" tabindex="-1"></a>                STATE <span class="op">=</span> <span class="st">"goodbye"</span></span>
<span id="cb467-25"><a href="interaction.html#cb467-25" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(STATE)</span>
<span id="cb467-26"><a href="interaction.html#cb467-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb467-27"><a href="interaction.html#cb467-27" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb467-28"><a href="interaction.html#cb467-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb467-29"><a href="interaction.html#cb467-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb467-30"><a href="interaction.html#cb467-30" aria-hidden="true" tabindex="-1"></a>        STATE <span class="op">=</span> <span class="st">"quit"</span></span>
<span id="cb467-31"><a href="interaction.html#cb467-31" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(STATE)</span>
<span id="cb467-32"><a href="interaction.html#cb467-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span></code></pre></div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>the event condition gets a little more complicated (more on that below) and that lets us prefer nested transitionals</li>
<li>the second transitional does a little data processing, namely capturing the response time by the time stamp method.</li>
<li>the third transitional contains two transitions, which we call a <code>branching transitional</code>. The inner most conditional interrogates the number of trials that have already been presented and either moves on to another trial or teh end of the experiment.</li>
<li>the last transitional breaks the event handler loop. If the user wants to quit, he wants to quit and not wait for the event handler loop to finish the queue.</li>
</ol>
<p>Automatic transitionals in Pygame differ in no way from automatic transitionals in console prototypes, except when you have to use the time_stamp method to cause a delay. They have the same structure and they remain directly under the fast <code>while</code> loop.</p>
<p>There is one automatic transitional in the Stroop program, that is a little special on closer examination: With every new trial, the transitional <code>prepare_trial</code> is triggered and automatically the program moves on to <code>show_trial</code>. On closer examination this transitional is different to the ones we have seen before, because the state <code>prepare_trial</code> does not have a presentational. It is completely invisible to the user, a <em>ghost transitional</em>. We also notice that there is quite some extra code inside. Some serious data processing is done, before the actual transition.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb468-1"><a href="interaction.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="co"># automatic transitionals</span></span>
<span id="cb468-2"><a href="interaction.html#cb468-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"prepare_trial"</span>:</span>
<span id="cb468-3"><a href="interaction.html#cb468-3" aria-hidden="true" tabindex="-1"></a>        trial_number <span class="op">=</span> trial_number <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb468-4"><a href="interaction.html#cb468-4" aria-hidden="true" tabindex="-1"></a>        this_word  <span class="op">=</span> pick_color()</span>
<span id="cb468-5"><a href="interaction.html#cb468-5" aria-hidden="true" tabindex="-1"></a>        this_color <span class="op">=</span> pick_color()</span>
<span id="cb468-6"><a href="interaction.html#cb468-6" aria-hidden="true" tabindex="-1"></a>        time_when_presented <span class="op">=</span> time()</span>
<span id="cb468-7"><a href="interaction.html#cb468-7" aria-hidden="true" tabindex="-1"></a>        STATE <span class="op">=</span> <span class="st">"show_trial"</span></span>
<span id="cb468-8"><a href="interaction.html#cb468-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(STATE)    </span></code></pre></div>
<p>This transition actually prepares all aspects of the stimulus, before it is shown. But, why aren’t these computations just be done during a direct transition to <code>show_trial</code>? In fact, for the little program we have here, it does not matter. It is just there to have one automatic transitional.</p>
<p>But, there are situations, where using ghost transitionals can be useful</p>
<ul>
<li>when the data processing is complex. Then, it seems more natural to think of the progranm being in data processing transition.</li>
<li>when the data processing lets the program branch. For example, we could define two separate states for trial feedback, for correct and incorrect responses. Then, it seems more natural to put the computations and branching into a “knot” on its own.</li>
</ul>
<p>IN both cases, the program will be easier to understand and debig, but there is no difference in functionality.</p>
</div>
<div id="pygame-events" class="section level3" number="8.3.5">
<h3>
<span class="header-section-number">8.3.5</span> Pygame events<a class="anchor" aria-label="anchor" href="#pygame-events"><i class="fas fa-link"></i></a>
</h3>
<p>The event handler collects the events between two refreshes and hands it over to the event loop. We have already seen on the transitionals that events are more complex than just literal characters. That makes sense, when you consider that also mouse events are being captured. They cannot be expressed as a characters, but as either coordinates (when the mouse is moved) or as button presses at a certain position on the screen.</p>
<p>But let’s look at keyboard input, first, as they appear in the Stroop program. They are all have the same in structure in their inner event conditions:</p>
<pre><code>  if event.type == KEYDOWN and event.key == K_&lt;key&gt;:</code></pre>
<p>So, this conditional asks for the type of the event, which is that a key has been pressed down. Note that this is more basic than that a key has been entered, as that would also mean it has been released. The secod condition is about the key. Different to our prototypes, this is not a literal character, but a constant, that Pygame has predefined. That helps to deal with keys that do not have a character assigned, such as Return, Alt, Ctrl and the arrows on your keyboard. The full list of key definitions can be found in the [Pygame documentation]:(<a href="https://www.pygame.org/docs/ref/key.html" class="uri">https://www.pygame.org/docs/ref/key.html</a>).</p>
<p>When there is a <code>KEYDOWN</code> there must also be a <code>KEYUP</code> event type, that is recorded, when the key is released again. That can be quite useful, when the goal is to do something as long as the key is pressed. Just try out what the key arrow_up does when you are editing a document. It moves the cursor up the lines until you release it.</p>
<p>The full list of event types is given in the [Pygame documentation]:(<a href="https://www.pygame.org/docs/ref/event.html" class="uri">https://www.pygame.org/docs/ref/event.html</a>). Here we will only briefly explain the most important, which is the event type QUIT and all mouse event types:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb470-1"><a href="interaction.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb470-2"><a href="interaction.html#cb470-2" aria-hidden="true" tabindex="-1"></a>  STATE <span class="op">=</span> <span class="st">"quit"</span></span>
<span id="cb470-3"><a href="interaction.html#cb470-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">break</span></span></code></pre></div>
<p>This actually corresponds with the all time exit that we once implemented in the prototype. Usually, the QUIT event is the same as a key press on the ESC key. And if you try it out, you will see that you can cancel the Stroop program at any time pressing ESC.</p>
<p>Mouse events come as several types with different properties, the two most important ones are:</p>
<ul>
<li>a MOUSEMOTION event is recorded when the mouse pointer has moved during the refreshes. It has an attribute <code>event.pos</code>, which is a list of two numbers, the x and y coordinates of the new pointer position.</li>
<li>MOUSEBUTTONDOWN is recorded when a mouse button is pressed down. The attribute event.button identifies which button it was (LEFT, RIGHT).</li>
</ul>
<p>See these two events in action in the following little program:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb471-1"><a href="interaction.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pygame</span>
<span id="cb471-2"><a href="interaction.html#cb471-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb471-3"><a href="interaction.html#cb471-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> time <span class="im">import</span> time</span>
<span id="cb471-4"><a href="interaction.html#cb471-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.<span class="bu">locals</span> <span class="im">import</span> <span class="op">*</span></span>
<span id="cb471-5"><a href="interaction.html#cb471-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb471-6"><a href="interaction.html#cb471-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.compat <span class="im">import</span> unichr_, unicode_</span>
<span id="cb471-7"><a href="interaction.html#cb471-7" aria-hidden="true" tabindex="-1"></a><span class="co">##### VARIABLES #####</span></span>
<span id="cb471-8"><a href="interaction.html#cb471-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Colors</span></span>
<span id="cb471-9"><a href="interaction.html#cb471-9" aria-hidden="true" tabindex="-1"></a>col_black <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb471-10"><a href="interaction.html#cb471-10" aria-hidden="true" tabindex="-1"></a>col_green <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>)</span>
<span id="cb471-11"><a href="interaction.html#cb471-11" aria-hidden="true" tabindex="-1"></a>col_green_dim <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">60</span>, <span class="dv">0</span>)</span>
<span id="cb471-12"><a href="interaction.html#cb471-12" aria-hidden="true" tabindex="-1"></a>BACKGR_COL <span class="op">=</span> col_black</span>
<span id="cb471-13"><a href="interaction.html#cb471-13" aria-hidden="true" tabindex="-1"></a>SCREEN_SIZE <span class="op">=</span> (<span class="dv">500</span>, <span class="dv">500</span>)</span>
<span id="cb471-14"><a href="interaction.html#cb471-14" aria-hidden="true" tabindex="-1"></a>pygame.init()</span>
<span id="cb471-15"><a href="interaction.html#cb471-15" aria-hidden="true" tabindex="-1"></a>pygame.display.set_mode(SCREEN_SIZE)</span>
<span id="cb471-16"><a href="interaction.html#cb471-16" aria-hidden="true" tabindex="-1"></a>pygame.display.set_caption(<span class="st">"Mouse events"</span>)</span>
<span id="cb471-17"><a href="interaction.html#cb471-17" aria-hidden="true" tabindex="-1"></a>screen <span class="op">=</span> pygame.display.get_surface()</span>
<span id="cb471-18"><a href="interaction.html#cb471-18" aria-hidden="true" tabindex="-1"></a>screen.fill(BACKGR_COL)</span>
<span id="cb471-19"><a href="interaction.html#cb471-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb471-20"><a href="interaction.html#cb471-20" aria-hidden="true" tabindex="-1"></a>    STATE <span class="op">=</span> <span class="st">"not_clicked"</span></span>
<span id="cb471-21"><a href="interaction.html#cb471-21" aria-hidden="true" tabindex="-1"></a>    mousex <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb471-22"><a href="interaction.html#cb471-22" aria-hidden="true" tabindex="-1"></a>    mousey <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb471-23"><a href="interaction.html#cb471-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb471-24"><a href="interaction.html#cb471-24" aria-hidden="true" tabindex="-1"></a>        screen.fill(BACKGR_COL)        </span>
<span id="cb471-25"><a href="interaction.html#cb471-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():                        </span>
<span id="cb471-26"><a href="interaction.html#cb471-26" aria-hidden="true" tabindex="-1"></a>            <span class="co"># IT</span></span>
<span id="cb471-27"><a href="interaction.html#cb471-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"not_clicked"</span>:</span>
<span id="cb471-28"><a href="interaction.html#cb471-28" aria-hidden="true" tabindex="-1"></a>                <span class="co"># mouse moved, new pointer position is stored</span></span>
<span id="cb471-29"><a href="interaction.html#cb471-29" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> MOUSEMOTION: </span>
<span id="cb471-30"><a href="interaction.html#cb471-30" aria-hidden="true" tabindex="-1"></a>                    mousex <span class="op">=</span> event.pos[<span class="dv">0</span>]</span>
<span id="cb471-31"><a href="interaction.html#cb471-31" aria-hidden="true" tabindex="-1"></a>                    mousey <span class="op">=</span> event.pos[<span class="dv">1</span>]</span>
<span id="cb471-32"><a href="interaction.html#cb471-32" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">continue</span></span>
<span id="cb471-33"><a href="interaction.html#cb471-33" aria-hidden="true" tabindex="-1"></a>                <span class="co"># left mouse button clicked</span></span>
<span id="cb471-34"><a href="interaction.html#cb471-34" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> MOUSEBUTTONDOWN <span class="kw">and</span> event.button <span class="op">==</span> LEFT: </span>
<span id="cb471-35"><a href="interaction.html#cb471-35" aria-hidden="true" tabindex="-1"></a>                    STATE <span class="op">=</span> <span class="st">"clicked"</span></span>
<span id="cb471-36"><a href="interaction.html#cb471-36" aria-hidden="true" tabindex="-1"></a>                    time_when_clicked <span class="op">=</span> time() <span class="co"># timestamp for "unclicking"</span></span>
<span id="cb471-37"><a href="interaction.html#cb471-37" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">continue</span></span>
<span id="cb471-38"><a href="interaction.html#cb471-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb471-39"><a href="interaction.html#cb471-39" aria-hidden="true" tabindex="-1"></a>                pygame.quit()</span>
<span id="cb471-40"><a href="interaction.html#cb471-40" aria-hidden="true" tabindex="-1"></a>                sys.exit()</span>
<span id="cb471-41"><a href="interaction.html#cb471-41" aria-hidden="true" tabindex="-1"></a>        <span class="co"># AT</span></span>
<span id="cb471-42"><a href="interaction.html#cb471-42" aria-hidden="true" tabindex="-1"></a>        <span class="co"># unclicking after 500ms</span></span>
<span id="cb471-43"><a href="interaction.html#cb471-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"clicked"</span> <span class="kw">and</span> time() <span class="op">-</span> time_when_clicked <span class="op">&gt;</span> <span class="fl">0.5</span>: </span>
<span id="cb471-44"><a href="interaction.html#cb471-44" aria-hidden="true" tabindex="-1"></a>            STATE <span class="op">=</span> <span class="st">"not_clicked"</span></span>
<span id="cb471-45"><a href="interaction.html#cb471-45" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  Presentitionals</span></span>
<span id="cb471-46"><a href="interaction.html#cb471-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"clicked"</span>:</span>
<span id="cb471-47"><a href="interaction.html#cb471-47" aria-hidden="true" tabindex="-1"></a>            draw(mousex, mousey, <span class="va">True</span>)</span>
<span id="cb471-48"><a href="interaction.html#cb471-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb471-49"><a href="interaction.html#cb471-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"not_clicked"</span>:</span>
<span id="cb471-50"><a href="interaction.html#cb471-50" aria-hidden="true" tabindex="-1"></a>            draw(mousex, mousey, <span class="va">False</span>)</span>
<span id="cb471-51"><a href="interaction.html#cb471-51" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb471-52"><a href="interaction.html#cb471-52" aria-hidden="true" tabindex="-1"></a>        pygame.display.update()</span>
<span id="cb471-53"><a href="interaction.html#cb471-53" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw(posx, posy, clicked):</span>
<span id="cb471-54"><a href="interaction.html#cb471-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> clicked:</span>
<span id="cb471-55"><a href="interaction.html#cb471-55" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> col_green</span>
<span id="cb471-56"><a href="interaction.html#cb471-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb471-57"><a href="interaction.html#cb471-57" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> col_green_dim</span>
<span id="cb471-58"><a href="interaction.html#cb471-58" aria-hidden="true" tabindex="-1"></a>    text_surface <span class="op">=</span> font.render(<span class="bu">str</span>(<span class="bu">int</span>(posx)) <span class="op">+</span> <span class="st">':'</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">int</span>(posy)), <span class="va">True</span>, color, BACKGR_COL)</span>
<span id="cb471-59"><a href="interaction.html#cb471-59" aria-hidden="true" tabindex="-1"></a>    text_rectangle <span class="op">=</span> text_surface.get_rect()</span>
<span id="cb471-60"><a href="interaction.html#cb471-60" aria-hidden="true" tabindex="-1"></a>    text_rectangle.center <span class="op">=</span> (SCREEN_SIZE[<span class="dv">0</span>]<span class="op">/</span><span class="fl">2.0</span>,SCREEN_SIZE[<span class="dv">1</span>]<span class="op">/</span><span class="fl">2.0</span>)</span>
<span id="cb471-61"><a href="interaction.html#cb471-61" aria-hidden="true" tabindex="-1"></a>    screen.blit(text_surface, text_rectangle)</span>
<span id="cb471-62"><a href="interaction.html#cb471-62" aria-hidden="true" tabindex="-1"></a>main()</span></code></pre></div>
<p>Notice that</p>
<ol style="list-style-type: decimal">
<li>
<code>event.pos</code> is a list of two values, the x and y coordinates</li>
<li>Pygame provides the mouse buttons as constants, which are not to be put in quotation marks.</li>
<li>it is unsafe to create new variables inside an event, as you never know when it happens. It is better to explicitly create variables (mousex, mousey) at the top of the main program</li>
<li>there are two presentitionals, but they both use the same function to do the drawing</li>
</ol>
<!-- #12 -->
</div>
</div>
<div id="presentitionals" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> Presentitionals in Pygame<a class="anchor" aria-label="anchor" href="#presentitionals"><i class="fas fa-link"></i></a>
</h2>
<p>And, here we’re getting to the candy! With Pygame presentitionals we give our program a face. The presentitionals of Pygame have the same formal structure as the prototype presentitionals, so there is nothing more to say about it. This chapter shows you how to create graphical user interface that render stimuli, show pictures, play animations and have buttons.</p>
<p>The Pygame system has been developed for arcade games and is very powerful when it comes to creating and transforming graphical objects. Unfortunately, that also makes it very complex, which is why the functions have so many dots in their names. Fortunately, many psychological experiments are at most as complex as the simplest arcade game. Introducing a small subset of Pygame functionality is sufficient. For when you are a geek take a look at other books on game development with Python.</p>
<p>Recall that at every refresh the screen is almost literally painted over. In fact, every one presentitional can be considered a drawing on its very own. That allows us to demonstrate the elements of Pygame graphics in simple programs, that produce a still picture. That also matches the way you should proceed, when writing the transitionals: first you write the scaffolding code, which consists of all the presentitional and their empty draw function. Then you grab the draw functions one by one and program the visuals, using text, geometric figures and pictures. Here is how the scaffolding looks like:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb472-1"><a href="interaction.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> state <span class="op">==</span> <span class="st">"some_state"</span>:</span>
<span id="cb472-2"><a href="interaction.html#cb472-2" aria-hidden="true" tabindex="-1"></a>  draw_some_state()</span>
<span id="cb472-3"><a href="interaction.html#cb472-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb472-4"><a href="interaction.html#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> state <span class="op">==</span> <span class="st">"some_other_state"</span>:</span>
<span id="cb472-5"><a href="interaction.html#cb472-5" aria-hidden="true" tabindex="-1"></a>  draw_some_state(some_property)</span>
<span id="cb472-6"><a href="interaction.html#cb472-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb472-7"><a href="interaction.html#cb472-7" aria-hidden="true" tabindex="-1"></a>pygame.display.update()</span>
<span id="cb472-8"><a href="interaction.html#cb472-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb472-9"><a href="interaction.html#cb472-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_some_state():</span>
<span id="cb472-10"><a href="interaction.html#cb472-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">pass</span></span>
<span id="cb472-11"><a href="interaction.html#cb472-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb472-12"><a href="interaction.html#cb472-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_some_other_state(some_property):</span>
<span id="cb472-13"><a href="interaction.html#cb472-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">pass</span></span></code></pre></div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>we do <em>not</em> use print statements in presentitionals, as they are in the fast loop.</li>
<li>often, it is useful to make the draw function more generic and use function arguments to fix some properties.</li>
</ol>
<div id="display-and-surface" class="section level3" number="8.4.1">
<h3>
<span class="header-section-number">8.4.1</span> Display and surface<a class="anchor" aria-label="anchor" href="#display-and-surface"><i class="fas fa-link"></i></a>
</h3>
<p>Creating the appearence of states means to draw things to the surface (also known as screen or canvas). However, before we can do so, the surface itself must be created. Also, we have to understand the “physical properties” of the surface.</p>
<p>Like almost any other program, a Pygame program appears as a window, just like the one in which this text is displayed, be it a browser or a pdf viewer. This windows is composed of the frame, which consists of a rectangular edge, a title bar with a caption and the Windows controls |_|| ||X| in the upper right corner. Between the edge sits the surface. The first thing that needs to be done is creating this window, which is called the <em>display</em> in Pygame terminology. The following code creates a minimal Pygame display with a surface that is 600 pixel wide and 400 pixel high and puts “A Pygame display” into the title bar. The only thing it can do is quit properly.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb473-1"><a href="interaction.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Required libraries</span></span>
<span id="cb473-2"><a href="interaction.html#cb473-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pygame</span>
<span id="cb473-3"><a href="interaction.html#cb473-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb473-4"><a href="interaction.html#cb473-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.<span class="bu">locals</span> <span class="im">import</span> <span class="op">*</span></span>
<span id="cb473-5"><a href="interaction.html#cb473-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.compat <span class="im">import</span> unichr_, unicode_</span>
<span id="cb473-6"><a href="interaction.html#cb473-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initializing the display</span></span>
<span id="cb473-7"><a href="interaction.html#cb473-7" aria-hidden="true" tabindex="-1"></a>pygame.init()</span>
<span id="cb473-8"><a href="interaction.html#cb473-8" aria-hidden="true" tabindex="-1"></a>pygame.display.set_mode((<span class="dv">600</span>, <span class="dv">400</span>))</span>
<span id="cb473-9"><a href="interaction.html#cb473-9" aria-hidden="true" tabindex="-1"></a>pygame.display.set_caption(<span class="st">"A Pygame display"</span>)</span>
<span id="cb473-10"><a href="interaction.html#cb473-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the surface</span></span>
<span id="cb473-11"><a href="interaction.html#cb473-11" aria-hidden="true" tabindex="-1"></a>surface <span class="op">=</span> pygame.display.get_surface()</span>
<span id="cb473-12"><a href="interaction.html#cb473-12" aria-hidden="true" tabindex="-1"></a>surface.fill((<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb473-13"><a href="interaction.html#cb473-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb473-14"><a href="interaction.html#cb473-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb473-15"><a href="interaction.html#cb473-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb473-16"><a href="interaction.html#cb473-16" aria-hidden="true" tabindex="-1"></a>            <span class="co"># IT</span></span>
<span id="cb473-17"><a href="interaction.html#cb473-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb473-18"><a href="interaction.html#cb473-18" aria-hidden="true" tabindex="-1"></a>                pygame.quit()</span>
<span id="cb473-19"><a href="interaction.html#cb473-19" aria-hidden="true" tabindex="-1"></a>                sys.exit()</span>
<span id="cb473-20"><a href="interaction.html#cb473-20" aria-hidden="true" tabindex="-1"></a>        pygame.display.update()</span>
<span id="cb473-21"><a href="interaction.html#cb473-21" aria-hidden="true" tabindex="-1"></a>main()</span></code></pre></div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>When initializing the display, there is no assignment operator involved. There is only one display object <code>pygame.display</code> which magically appears by initializing pygame. However, to some extent you can configure it to your liking.</li>
<li>As we do it here, the display is set to a fixed size and you won’t be able to resize the window during runtime. There is a way to make it resizeable, but that would complicate matters when it comes to drawing to the surface.</li>
<li>The surface is an object that is created by <code>pygame.display.get_surface()</code> and assigned the name <code>surface</code> here. Thus, you can give it another name and, in fact, we call it “screen” or “canvas” in other examples of this book.</li>
<li>With <code>surface.fill()</code> you give the surface a color. For more on colors, read on.</li>
<li>It is the display that is updated (refreshed), not the surface, which is just a little counter-intuitive, as the surface is where we draw.</li>
<li>Although the program does nithing noteworthy, we included the event handler with a quit transition. If we do not, closing the window becomes a surprisingly difficult task.</li>
</ol>
<p>There is more to say about the surface than you can actually see in this example. One thing to notice is that the size of the surface is given with <em>pixel</em> as a unit. What is a pixel? Take a loupe and look at your computer monitor closely. You will see tiny dots, each of which is composed of three differently colored areas. These dots are the pixel and everything you draw or render to the screen is actually composed of pixel. It seems natural to use pixel as a unit of measurement when programming graphics, as long as we precisely know the size of the surface. One reason for not using metric (mm, cm) as units is that pixel size can differ a lot between monitors. Use the same loupe on teh display of your smartphone to check this yourself. This is why, here, we always work with fixed size displays.</p>
<p>Objects are placed on the canvas by <em>coordinates</em>, and these are given in pixel, too. While we are used to coordinate systems that have the origin (x = 0, y = 0) in the lower left corner, Pygame surfaces have the <em>origin (0,0) in the upper left corner</em>. The historical reason is that the old clunky electron ray tubes start a new refresh in the first line, from left-to-right. Perhaps, it is easier to remember that it is like writing a text.</p>
<p>By <code>pygame.update.display()</code> the refresh loop updates the display at every iteration. This update collects all the graphical elements that have been produced during that iteration and puts them to the surface. However, speaking figuratively this is <em>unlike</em> grabbing a fresh canvas and do the drawing. It is much like how the old masters worked with oil on canvas. New or updated elements are over-painted. Areas that are not affected by over-painting stay just as they are. In computer games that perfectly makes sense. When navigating a character, say the famous Pacman, the maze is constant and it makes little sense to update it every 60th of a second. In the interactive programs we are dealing with, here, the interface layout changes more often and, in order to play it safe, we always do the <code>surface.fill()</code> in order to create a blank sheet at every refresh.</p>
<p>Speaking of <em>colors</em>: after creating the surface, we filled it with our background color of choice, which is the tupel <code>(0, 0, 0)</code>. Why these three numbers? Remember what you saw through the loop: every pixel is composed of three subpixel of different colors, namely: Red, Green and Blue. That is how every computer in the world composes colors: as an <em>additive mixture</em> of these three colors. In short, we call it the <em>RGB system</em>. Every subpixel has a fixed color, but the brightness of the color can vary, taking values from 0 to 255 (which happens to be called a byte). For a few examples, check out the Stroop program, where a number of colors have been predefined as tupels. So, <code>(0, 0, 0)</code> means that all three color channels are dark and the results is Black. On the very opposite <code>(255, 255, 255)</code> means all channels fire at maximum brightness, which results in White.</p>
<!-- #14 -->
</div>
<div id="drawing-figures" class="section level3" number="8.4.2">
<h3>
<span class="header-section-number">8.4.2</span> Drawing figures<a class="anchor" aria-label="anchor" href="#drawing-figures"><i class="fas fa-link"></i></a>
</h3>
<!-- #16 -->
<div class="sourceCode" id="cb474"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb474-1"><a href="interaction.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pygame</span>
<span id="cb474-2"><a href="interaction.html#cb474-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb474-3"><a href="interaction.html#cb474-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.<span class="bu">locals</span> <span class="im">import</span> <span class="op">*</span></span>
<span id="cb474-4"><a href="interaction.html#cb474-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.compat <span class="im">import</span> unichr_, unicode_</span>
<span id="cb474-5"><a href="interaction.html#cb474-5" aria-hidden="true" tabindex="-1"></a>pygame.init()</span>
<span id="cb474-6"><a href="interaction.html#cb474-6" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb474-7"><a href="interaction.html#cb474-7" aria-hidden="true" tabindex="-1"></a>height <span class="op">=</span> <span class="dv">800</span></span>
<span id="cb474-8"><a href="interaction.html#cb474-8" aria-hidden="true" tabindex="-1"></a>pygame.display.set_mode((width, height))</span>
<span id="cb474-9"><a href="interaction.html#cb474-9" aria-hidden="true" tabindex="-1"></a>pygame.display.set_caption(<span class="st">"Drawing figures"</span>)</span>
<span id="cb474-10"><a href="interaction.html#cb474-10" aria-hidden="true" tabindex="-1"></a>screen <span class="op">=</span> pygame.display.get_surface()</span>
<span id="cb474-11"><a href="interaction.html#cb474-11" aria-hidden="true" tabindex="-1"></a>screen.fill((<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb474-12"><a href="interaction.html#cb474-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb474-13"><a href="interaction.html#cb474-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb474-14"><a href="interaction.html#cb474-14" aria-hidden="true" tabindex="-1"></a>        screen.fill((<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb474-15"><a href="interaction.html#cb474-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb474-16"><a href="interaction.html#cb474-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb474-17"><a href="interaction.html#cb474-17" aria-hidden="true" tabindex="-1"></a>                pygame.quit()</span>
<span id="cb474-18"><a href="interaction.html#cb474-18" aria-hidden="true" tabindex="-1"></a>                sys.exit()</span>
<span id="cb474-19"><a href="interaction.html#cb474-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb474-20"><a href="interaction.html#cb474-20" aria-hidden="true" tabindex="-1"></a>        draw_circ(<span class="dv">250</span>, <span class="dv">200</span>, <span class="dv">200</span>, (<span class="dv">255</span>, <span class="dv">255</span>, <span class="dv">255</span>), <span class="dv">5</span>)</span>
<span id="cb474-21"><a href="interaction.html#cb474-21" aria-hidden="true" tabindex="-1"></a>        draw_circ(<span class="dv">250</span>, <span class="dv">200</span>, <span class="dv">150</span>, (<span class="dv">255</span>, <span class="dv">255</span>, <span class="dv">255</span>), <span class="dv">20</span>)</span>
<span id="cb474-22"><a href="interaction.html#cb474-22" aria-hidden="true" tabindex="-1"></a>        draw_circ(<span class="dv">250</span>, <span class="dv">650</span>, <span class="dv">100</span>, (<span class="dv">255</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dv">0</span>)</span>
<span id="cb474-23"><a href="interaction.html#cb474-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb474-24"><a href="interaction.html#cb474-24" aria-hidden="true" tabindex="-1"></a>        draw_rect(<span class="dv">500</span>, <span class="dv">50</span>,  <span class="dv">400</span>, <span class="dv">600</span>, (<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">255</span>), <span class="dv">0</span>)</span>
<span id="cb474-25"><a href="interaction.html#cb474-25" aria-hidden="true" tabindex="-1"></a>        draw_rect(<span class="dv">500</span>, <span class="dv">50</span>,  <span class="dv">200</span>, <span class="dv">200</span>, (<span class="dv">0</span>, <span class="dv">255</span>, <span class="dv">0</span>), <span class="dv">10</span>)</span>
<span id="cb474-26"><a href="interaction.html#cb474-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb474-27"><a href="interaction.html#cb474-27" aria-hidden="true" tabindex="-1"></a>        draw_tria(<span class="dv">250</span>, <span class="dv">200</span>, <span class="dv">250</span>, <span class="dv">650</span>, <span class="dv">500</span>, <span class="dv">50</span>)</span>
<span id="cb474-28"><a href="interaction.html#cb474-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb474-29"><a href="interaction.html#cb474-29" aria-hidden="true" tabindex="-1"></a>        pygame.display.update()</span>
<span id="cb474-30"><a href="interaction.html#cb474-30" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_circ(x, y, radius, </span>
<span id="cb474-31"><a href="interaction.html#cb474-31" aria-hidden="true" tabindex="-1"></a>              color <span class="op">=</span> (<span class="dv">255</span>,<span class="dv">255</span>,<span class="dv">255</span>), </span>
<span id="cb474-32"><a href="interaction.html#cb474-32" aria-hidden="true" tabindex="-1"></a>              stroke_size <span class="op">=</span> <span class="dv">1</span>):</span>
<span id="cb474-33"><a href="interaction.html#cb474-33" aria-hidden="true" tabindex="-1"></a>    pygame.draw.circle(screen, color, </span>
<span id="cb474-34"><a href="interaction.html#cb474-34" aria-hidden="true" tabindex="-1"></a>                       (x,y), radius, stroke_size)</span>
<span id="cb474-35"><a href="interaction.html#cb474-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_rect(x, y, </span>
<span id="cb474-36"><a href="interaction.html#cb474-36" aria-hidden="true" tabindex="-1"></a>              width, height, </span>
<span id="cb474-37"><a href="interaction.html#cb474-37" aria-hidden="true" tabindex="-1"></a>              color <span class="op">=</span> (<span class="dv">255</span>,<span class="dv">255</span>,<span class="dv">255</span>), </span>
<span id="cb474-38"><a href="interaction.html#cb474-38" aria-hidden="true" tabindex="-1"></a>              stroke_size <span class="op">=</span> <span class="dv">1</span>):</span>
<span id="cb474-39"><a href="interaction.html#cb474-39" aria-hidden="true" tabindex="-1"></a>    pygame.draw.rect(screen, color, (x, y, width, height), stroke_size)</span>
<span id="cb474-40"><a href="interaction.html#cb474-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb474-41"><a href="interaction.html#cb474-41" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_tria(x_1, y_1, </span>
<span id="cb474-42"><a href="interaction.html#cb474-42" aria-hidden="true" tabindex="-1"></a>              x_2, y_2,</span>
<span id="cb474-43"><a href="interaction.html#cb474-43" aria-hidden="true" tabindex="-1"></a>              x_3, y_3, color <span class="op">=</span> (<span class="dv">255</span>,<span class="dv">255</span>,<span class="dv">255</span>), </span>
<span id="cb474-44"><a href="interaction.html#cb474-44" aria-hidden="true" tabindex="-1"></a>              stroke_size <span class="op">=</span> <span class="dv">1</span>):</span>
<span id="cb474-45"><a href="interaction.html#cb474-45" aria-hidden="true" tabindex="-1"></a>    points <span class="op">=</span> ((x_1, y_1), (x_2, y_2), (x_3, y_3))</span>
<span id="cb474-46"><a href="interaction.html#cb474-46" aria-hidden="true" tabindex="-1"></a>    pygame.draw.polygon(screen, color, points, stroke_size)</span>
<span id="cb474-47"><a href="interaction.html#cb474-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb474-48"><a href="interaction.html#cb474-48" aria-hidden="true" tabindex="-1"></a>main()</span></code></pre></div>
<div class="figure">
<img src="figures/Draw_figures.png" alt=""><p class="caption">Drawing_figures</p>
</div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>The order of drawing commands determines how figures are painted over one another.</li>
<li>Sometimes it is useful to write your own wrapper functions for Psygame commands. Here, it is mainly for the purpose of creating a matrix-like appearance by function names of equal length.</li>
<li>Even static programs should have a minimal event loop that reacts properly when the user wants to quit the program.</li>
</ol>
</div>
<div id="placing-text-and-pictures" class="section level3" number="8.4.3">
<h3>
<span class="header-section-number">8.4.3</span> Placing text and pictures<a class="anchor" aria-label="anchor" href="#placing-text-and-pictures"><i class="fas fa-link"></i></a>
</h3>
<p>Putting text on the screen is something that we experience everyday, when we read the internet, write emails or write code. One might think that this is as straight-forward in Pygame as creating figures. It is not that easy, though, and in order to understand why these complications arise, think about the following: When you want to write on a note “DON’T PANIC!” with a surrounding box. What do you do first, the writing or the box?</p>
<p>You put the writing first, because only after you have written do you see how high and wide the written text is. And the same problem happens when rendering text on Pygame surfaces. Fonts differ and even individual characters differ. There is no more reasonable way, to determine the size of the text box, after it has been rendered. To solve the problem, we divide the drawing process in two parts: the <em>rendering</em> part creates an object of the text box in the computer memory, without sending it to the surface, yet. From this object, we can retrieve the properties of the text box, most notably its dimensions. Even better, this object can be manipulated in many ways, for example resizing or moving it <a href="https://www.pygame.org/docs/ref/rect.html">Pygame doc</a>. Only after that, the text object is send to the surface.</p>
<p>In the following program we merged both steps into a more programmer-friendly function that almost behaves like the figure drawing commands. The only difference: you don’t know in advance how large the textbox will be.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb475-1"><a href="interaction.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pygame</span>
<span id="cb475-2"><a href="interaction.html#cb475-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb475-3"><a href="interaction.html#cb475-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.<span class="bu">locals</span> <span class="im">import</span> <span class="op">*</span></span>
<span id="cb475-4"><a href="interaction.html#cb475-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pygame.compat <span class="im">import</span> unichr_, unicode_</span>
<span id="cb475-5"><a href="interaction.html#cb475-5" aria-hidden="true" tabindex="-1"></a>pygame.init()</span>
<span id="cb475-6"><a href="interaction.html#cb475-6" aria-hidden="true" tabindex="-1"></a>width <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb475-7"><a href="interaction.html#cb475-7" aria-hidden="true" tabindex="-1"></a>height <span class="op">=</span> <span class="dv">800</span></span>
<span id="cb475-8"><a href="interaction.html#cb475-8" aria-hidden="true" tabindex="-1"></a>pygame.display.set_mode((width, height))</span>
<span id="cb475-9"><a href="interaction.html#cb475-9" aria-hidden="true" tabindex="-1"></a>pygame.display.set_caption(<span class="st">"Drawing figures"</span>)</span>
<span id="cb475-10"><a href="interaction.html#cb475-10" aria-hidden="true" tabindex="-1"></a>FONT <span class="op">=</span> pygame.font.Font(<span class="st">'freesansbold.ttf'</span>,<span class="dv">40</span>)</span>
<span id="cb475-11"><a href="interaction.html#cb475-11" aria-hidden="true" tabindex="-1"></a>SURF <span class="op">=</span> pygame.display.get_surface()</span>
<span id="cb475-12"><a href="interaction.html#cb475-12" aria-hidden="true" tabindex="-1"></a>SURF.fill((<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb475-13"><a href="interaction.html#cb475-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb475-14"><a href="interaction.html#cb475-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb475-15"><a href="interaction.html#cb475-15" aria-hidden="true" tabindex="-1"></a>        SURF.fill((<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb475-16"><a href="interaction.html#cb475-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb475-17"><a href="interaction.html#cb475-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb475-18"><a href="interaction.html#cb475-18" aria-hidden="true" tabindex="-1"></a>                pygame.quit()</span>
<span id="cb475-19"><a href="interaction.html#cb475-19" aria-hidden="true" tabindex="-1"></a>                sys.exit()</span>
<span id="cb475-20"><a href="interaction.html#cb475-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb475-21"><a href="interaction.html#cb475-21" aria-hidden="true" tabindex="-1"></a>        draw_text(x <span class="op">=</span> <span class="dv">0</span>, y <span class="op">=</span> <span class="dv">0</span>, text <span class="op">=</span> <span class="st">"Pygame says:"</span>)</span>
<span id="cb475-22"><a href="interaction.html#cb475-22" aria-hidden="true" tabindex="-1"></a>        draw_text(x <span class="op">=</span> width<span class="op">/</span><span class="dv">2</span>, y <span class="op">=</span> height<span class="op">/</span><span class="dv">2</span>, text <span class="op">=</span> <span class="st">"Hi there!"</span>, </span>
<span id="cb475-23"><a href="interaction.html#cb475-23" aria-hidden="true" tabindex="-1"></a>                  center <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb475-24"><a href="interaction.html#cb475-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb475-25"><a href="interaction.html#cb475-25" aria-hidden="true" tabindex="-1"></a>        pygame.display.update()</span>
<span id="cb475-26"><a href="interaction.html#cb475-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_text(x, y, text,</span>
<span id="cb475-27"><a href="interaction.html#cb475-27" aria-hidden="true" tabindex="-1"></a>              color <span class="op">=</span> (<span class="dv">255</span>, <span class="dv">255</span>, <span class="dv">255</span>),</span>
<span id="cb475-28"><a href="interaction.html#cb475-28" aria-hidden="true" tabindex="-1"></a>              center <span class="op">=</span> <span class="va">False</span>):</span>
<span id="cb475-29"><a href="interaction.html#cb475-29" aria-hidden="true" tabindex="-1"></a>    rendered_text <span class="op">=</span> FONT.render(text, <span class="va">True</span>, color)</span>
<span id="cb475-30"><a href="interaction.html#cb475-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># retrieving the abstract rectangle of the text box</span></span>
<span id="cb475-31"><a href="interaction.html#cb475-31" aria-hidden="true" tabindex="-1"></a>    box <span class="op">=</span> rendered_text.get_rect()</span>
<span id="cb475-32"><a href="interaction.html#cb475-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># this sets the x and why coordinates</span></span>
<span id="cb475-33"><a href="interaction.html#cb475-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> center:</span>
<span id="cb475-34"><a href="interaction.html#cb475-34" aria-hidden="true" tabindex="-1"></a>        box.center <span class="op">=</span> (x,y)</span>
<span id="cb475-35"><a href="interaction.html#cb475-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb475-36"><a href="interaction.html#cb475-36" aria-hidden="true" tabindex="-1"></a>        box.topleft <span class="op">=</span> (x,y)</span>
<span id="cb475-37"><a href="interaction.html#cb475-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># This puts a pre-rendered object to the screen</span></span>
<span id="cb475-38"><a href="interaction.html#cb475-38" aria-hidden="true" tabindex="-1"></a>    SURF.blit(rendered_text, box)</span>
<span id="cb475-39"><a href="interaction.html#cb475-39" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb475-40"><a href="interaction.html#cb475-40" aria-hidden="true" tabindex="-1"></a>main()</span></code></pre></div>
<p>Notice that:</p>
<ol style="list-style-type: decimal">
<li>First, we actually have to select a font for the text. Here. this is set globally.</li>
<li>The coordinates of the function refer to the upper left corner by default, but can be set to refer to teh center of the box.</li>
<li>The <code>SURF.blit()</code> command sends the rendered text and the textbox to the surface.</li>
<li>The box is first retrieved from the rendered text, then moved and finally send to the surface.</li>
<li>The function <code>draw_textbox()</code> uses <code>pygame.transform.smoothscale()</code> to force the text into a given width and height. The results don’t neccessarily look good.</li>
<li>We have consistently put all global variables into capital letters to avoid confusion between globalö and local variables.</li>
</ol>
<p>Working with pictures is very similar to text boxes. Again, you only know the size once you have loaded the file from your hard drive.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb476-1"><a href="interaction.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb476-2"><a href="interaction.html#cb476-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb476-3"><a href="interaction.html#cb476-3" aria-hidden="true" tabindex="-1"></a>        SURF.fill((<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb476-4"><a href="interaction.html#cb476-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb476-5"><a href="interaction.html#cb476-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> QUIT:</span>
<span id="cb476-6"><a href="interaction.html#cb476-6" aria-hidden="true" tabindex="-1"></a>                pygame.quit()</span>
<span id="cb476-7"><a href="interaction.html#cb476-7" aria-hidden="true" tabindex="-1"></a>                sys.exit()</span>
<span id="cb476-8"><a href="interaction.html#cb476-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb476-9"><a href="interaction.html#cb476-9" aria-hidden="true" tabindex="-1"></a>        draw_picture(x <span class="op">=</span> WIDTH<span class="op">/</span><span class="dv">2</span>, y <span class="op">=</span> HEIGHT<span class="op">/</span><span class="dv">2</span>, <span class="bu">file</span> <span class="op">=</span> <span class="st">"Beach.png"</span>, </span>
<span id="cb476-10"><a href="interaction.html#cb476-10" aria-hidden="true" tabindex="-1"></a>                     center <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb476-11"><a href="interaction.html#cb476-11" aria-hidden="true" tabindex="-1"></a>                     scale <span class="op">=</span> <span class="fl">0.5</span>)</span>
<span id="cb476-12"><a href="interaction.html#cb476-12" aria-hidden="true" tabindex="-1"></a>        pygame.display.update()</span>
<span id="cb476-13"><a href="interaction.html#cb476-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_picture(x, y, <span class="bu">file</span>, scale <span class="op">=</span> <span class="dv">1</span>, center <span class="op">=</span> <span class="va">False</span>):</span>
<span id="cb476-14"><a href="interaction.html#cb476-14" aria-hidden="true" tabindex="-1"></a>    picture <span class="op">=</span> pygame.image.load(<span class="bu">file</span>)</span>
<span id="cb476-15"><a href="interaction.html#cb476-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># retrieving the box</span></span>
<span id="cb476-16"><a href="interaction.html#cb476-16" aria-hidden="true" tabindex="-1"></a>    box <span class="op">=</span> picture.get_rect()</span>
<span id="cb476-17"><a href="interaction.html#cb476-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># transformation</span></span>
<span id="cb476-18"><a href="interaction.html#cb476-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> scale <span class="op">!=</span> <span class="dv">1</span>:</span>
<span id="cb476-19"><a href="interaction.html#cb476-19" aria-hidden="true" tabindex="-1"></a>        new_width <span class="op">=</span> <span class="bu">int</span>(box.width <span class="op">*</span> scale)</span>
<span id="cb476-20"><a href="interaction.html#cb476-20" aria-hidden="true" tabindex="-1"></a>        new_height <span class="op">=</span> <span class="bu">int</span>(box.height <span class="op">*</span> scale)</span>
<span id="cb476-21"><a href="interaction.html#cb476-21" aria-hidden="true" tabindex="-1"></a>        picture <span class="op">=</span> pygame.transform.smoothscale(picture, </span>
<span id="cb476-22"><a href="interaction.html#cb476-22" aria-hidden="true" tabindex="-1"></a>                                               (new_width, new_height))</span>
<span id="cb476-23"><a href="interaction.html#cb476-23" aria-hidden="true" tabindex="-1"></a>        box <span class="op">=</span> picture.get_rect()</span>
<span id="cb476-24"><a href="interaction.html#cb476-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># getting the new box</span></span>
<span id="cb476-25"><a href="interaction.html#cb476-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> center:</span>
<span id="cb476-26"><a href="interaction.html#cb476-26" aria-hidden="true" tabindex="-1"></a>        box.center <span class="op">=</span> (x,y)</span>
<span id="cb476-27"><a href="interaction.html#cb476-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb476-28"><a href="interaction.html#cb476-28" aria-hidden="true" tabindex="-1"></a>        box.topleft <span class="op">=</span> (x,y)</span>
<span id="cb476-29"><a href="interaction.html#cb476-29" aria-hidden="true" tabindex="-1"></a>    SURF.blit(picture, box)</span>
<span id="cb476-30"><a href="interaction.html#cb476-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb476-31"><a href="interaction.html#cb476-31" aria-hidden="true" tabindex="-1"></a>main()</span></code></pre></div>
<p>Notice that</p>
<ol style="list-style-type: decimal">
<li>the picture file resides in teh same directory as the program. If that is different you have to use relative paths. Avoid absolute paths, as this makes the program less portable.</li>
<li>in the function definition, we put the scale arguent at the end, although an earlier position would be more logical. The reason is that all argument without a default have to come first, such as file.</li>
<li>
<code>picture.get_rect()</code> is called twice. After the scaling the box gets an update</li>
<li>Putting the scaling part into a conditional is not necessary, but saves computation where it is not needed.</li>
</ol>
<!--
### Playing animations


+ the refresh rate
+ computer-aided hypnosis

### Interactive animations

Remember Pacman? In this classic arcade game, four ghosts haunt you while wander a dungeon to collect all the cookies. Forget the ghosts and recall what above we have said about the Pygame surface being like an oilpainting. If we would write a Pacman program, we would use `surface.fill(BG_COLOR)`, such that whenever the Pacman figure moves it disappears from its previous position. Imagine what would happen if you forgot the surface fill?

The Pacman figure would leave a trail of copies of itself, painting a trail with its past moments. If you would then also remove the dungeon itself, what you get is a program that paints to the screen.

+ drawing with objects
+ drawing mandalas


--><!-- 15 --><!--

### Controls

+ hitting objects
+ buttons
+ text input
+ dealing with object sets. Use Pandas, not lists. 

-->
</div>
</div>
<div id="exercises-8" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-8"><i class="fas fa-link"></i></a>
</h2>
<div id="exercise-c.-transition-tables" class="section level3" number="8.5.1">
<h3>
<span class="header-section-number">8.5.1</span> Exercise C. Transition tables<a class="anchor" aria-label="anchor" href="#exercise-c.-transition-tables"><i class="fas fa-link"></i></a>
</h3>
<p>For the following code snippet, make a transition table.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb477-1"><a href="interaction.html#cb477-1" aria-hidden="true" tabindex="-1"></a>STATE <span class="op">=</span> <span class="st">"A"</span></span>
<span id="cb477-2"><a href="interaction.html#cb477-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb477-3"><a href="interaction.html#cb477-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#ITC</span></span>
<span id="cb477-4"><a href="interaction.html#cb477-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():                        </span>
<span id="cb477-5"><a href="interaction.html#cb477-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"A"</span>:</span>
<span id="cb477-6"><a href="interaction.html#cb477-6" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb477-7"><a href="interaction.html#cb477-7" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="op">==</span> K_w:</span>
<span id="cb477-8"><a href="interaction.html#cb477-8" aria-hidden="true" tabindex="-1"></a>                STATE <span class="op">=</span> <span class="st">"B"</span></span>
<span id="cb477-9"><a href="interaction.html#cb477-9" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(STATE)</span>
<span id="cb477-10"><a href="interaction.html#cb477-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> STATE <span class="op">==</span> <span class="st">"B"</span>:</span>
<span id="cb477-11"><a href="interaction.html#cb477-11" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb477-12"><a href="interaction.html#cb477-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="op">==</span> K_a:</span>
<span id="cb477-13"><a href="interaction.html#cb477-13" aria-hidden="true" tabindex="-1"></a>                timer <span class="op">=</span> time()</span>
<span id="cb477-14"><a href="interaction.html#cb477-14" aria-hidden="true" tabindex="-1"></a>                STATE <span class="op">=</span> <span class="st">"C"</span></span>
<span id="cb477-15"><a href="interaction.html#cb477-15" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(STATE)</span>
<span id="cb477-16"><a href="interaction.html#cb477-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> STATE <span class="op">==</span> <span class="st">"D"</span>:</span>
<span id="cb477-17"><a href="interaction.html#cb477-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> event.<span class="bu">type</span> <span class="op">==</span> KEYDOWN <span class="kw">and</span> event.key <span class="op">==</span> K_SPACE:</span>
<span id="cb477-18"><a href="interaction.html#cb477-18" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> count <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb477-19"><a href="interaction.html#cb477-19" aria-hidden="true" tabindex="-1"></a>                    STATE <span class="op">=</span> <span class="st">"B"</span></span>
<span id="cb477-20"><a href="interaction.html#cb477-20" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span>:</span>
<span id="cb477-21"><a href="interaction.html#cb477-21" aria-hidden="true" tabindex="-1"></a>                    STATE <span class="op">=</span> <span class="st">"quit"</span></span>
<span id="cb477-22"><a href="interaction.html#cb477-22" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(STATE)</span>
<span id="cb477-23"><a href="interaction.html#cb477-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">#ATC</span></span>
<span id="cb477-24"><a href="interaction.html#cb477-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> STATE <span class="op">==</span> <span class="st">"C"</span>:</span>
<span id="cb477-25"><a href="interaction.html#cb477-25" aria-hidden="true" tabindex="-1"></a>        present_picture()</span>
<span id="cb477-26"><a href="interaction.html#cb477-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> time() <span class="op">-</span> timer <span class="op">&gt;</span> <span class="dv">3</span>:</span>
<span id="cb477-27"><a href="interaction.html#cb477-27" aria-hidden="true" tabindex="-1"></a>            STATE <span class="op">=</span> <span class="st">"D"</span></span>
<span id="cb477-28"><a href="interaction.html#cb477-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(STATE)</span>
<span id="cb477-29"><a href="interaction.html#cb477-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> STATE <span class="op">==</span> <span class="st">"quit"</span>:</span>
<span id="cb477-30"><a href="interaction.html#cb477-30" aria-hidden="true" tabindex="-1"></a>        pygame.quit()</span>
<span id="cb477-31"><a href="interaction.html#cb477-31" aria-hidden="true" tabindex="-1"></a>        sys.exit()</span></code></pre></div>
</div>
</div>
<div id="common-errors-5" class="section level2" number="8.6">
<h2>
<span class="header-section-number">8.6</span> Common errors<a class="anchor" aria-label="anchor" href="#common-errors-5"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>You forgot to add <code>continue</code> transitionals.</li>
<li>You used drawing functions inside the event handler loop.</li>
<li>You used the wait command in a Pygame program.</li>
</ol>
</div>
<div id="think-further-7" class="section level2" number="8.7">
<h2>
<span class="header-section-number">8.7</span> Think Further<a class="anchor" aria-label="anchor" href="#think-further-7"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data.html"><span class="header-section-number">7</span> Working with data</a></div>
<div class="next"><a href="solutions.html"><span class="header-section-number">9</span> Solutions</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#interaction"><span class="header-section-number">8</span> Interaction</a></li>
<li>
<a class="nav-link" href="#interaction-models"><span class="header-section-number">8.1</span> Interaction models</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#identifying-states"><span class="header-section-number">8.1.1</span> Identifying states</a></li>
<li><a class="nav-link" href="#identifying-transitions"><span class="header-section-number">8.1.2</span> Identifying transitions</a></li>
<li><a class="nav-link" href="#events-user-input-and-internal-conditions"><span class="header-section-number">8.1.3</span> Events: user input and internal conditions</a></li>
<li><a class="nav-link" href="#exercises-7"><span class="header-section-number">8.1.4</span> Exercises</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#programming-interactive-prototypes"><span class="header-section-number">8.2</span> Programming interactive prototypes</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#interactive-transitionals"><span class="header-section-number">8.2.1</span> Interactive transitionals</a></li>
<li><a class="nav-link" href="#automatic-transitions"><span class="header-section-number">8.2.2</span> Automatic transitions</a></li>
<li><a class="nav-link" href="#the-timestamp-method"><span class="header-section-number">8.2.3</span> The timestamp method</a></li>
<li><a class="nav-link" href="#presentation-conditionals"><span class="header-section-number">8.2.4</span> Presentation conditionals</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#interactions-in-pygame"><span class="header-section-number">8.3</span> Interactions in Pygame</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#overall-structure"><span class="header-section-number">8.3.1</span> Overall structure</a></li>
<li><a class="nav-link" href="#the-screen-and-the-refresh-loop."><span class="header-section-number">8.3.2</span> The screen and the refresh loop.</a></li>
<li><a class="nav-link" href="#handling-user-input"><span class="header-section-number">8.3.3</span> Handling user input</a></li>
<li><a class="nav-link" href="#transitionals"><span class="header-section-number">8.3.4</span> Transitionals</a></li>
<li><a class="nav-link" href="#pygame-events"><span class="header-section-number">8.3.5</span> Pygame events</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#presentitionals"><span class="header-section-number">8.4</span> Presentitionals in Pygame</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#display-and-surface"><span class="header-section-number">8.4.1</span> Display and surface</a></li>
<li><a class="nav-link" href="#drawing-figures"><span class="header-section-number">8.4.2</span> Drawing figures</a></li>
<li><a class="nav-link" href="#placing-text-and-pictures"><span class="header-section-number">8.4.3</span> Placing text and pictures</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#exercises-8"><span class="header-section-number">8.5</span> Exercises</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-c.-transition-tables"><span class="header-section-number">8.5.1</span> Exercise C. Transition tables</a></li></ul>
</li>
<li><a class="nav-link" href="#common-errors-5"><span class="header-section-number">8.6</span> Common errors</a></li>
<li><a class="nav-link" href="#think-further-7"><span class="header-section-number">8.7</span> Think Further</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Programming for researcher on behaviour</strong>: A first course in Python" was written by Martin Schmettow and Lena Brandl. It was last built on 2021-11-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
